<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png"><link rel="icon" href="/img/android-chrome-192x192.png"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Suncle Chen"><meta name="keywords" content=""><meta name="description" content="类的定义类的定义的语法 123456class ClassName:    &lt;statement-1&gt;    .    .    .    &lt;statement-N&gt;  示例代码 1234class Door:    def __init__(self, number, status):        self.number &#x3D; number        self.sta"><meta property="og:type" content="article"><meta property="og:title" content="Python面向对象基础"><meta property="og:url" content="https://suncle.me/posts/3226889536.html"><meta property="og:site_name" content="Suncle"><meta property="og:description" content="类的定义类的定义的语法 123456class ClassName:    &lt;statement-1&gt;    .    .    .    &lt;statement-N&gt;  示例代码 1234class Door:    def __init__(self, number, status):        self.number &#x3D; number        self.sta"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://flowsnow.oss-cn-shanghai.aliyuncs.com/history/image/MixIn.jpg"><meta property="article:published_time" content="2017-03-08T04:22:42.000Z"><meta property="article:modified_time" content="2022-08-25T17:31:47.980Z"><meta property="article:author" content="Suncle Chen"><meta property="article:tag" content="Python"><meta property="article:tag" content="面向对象"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://flowsnow.oss-cn-shanghai.aliyuncs.com/history/image/MixIn.jpg"><meta name="referrer" content="no-referrer-when-downgrade"><title>Python面向对象基础 - Suncle</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"suncle.me",root:"/",version:"1.9.2",typing:{enable:!1,typeSpeed:70,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"left",visible:"hover",icon:""},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!1,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:0},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!1,follow_dnt:!0,baidu:"41fc030db57d5570dd22f78997dc4a7e",google:"UA-72506112-1",gtag:null,tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml"};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Suncle" type="application/atom+xml">
</head><body><header><div class="header-inner" style="height:60vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Suncle&#39;s Blog</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/"><i class="iconfont icon-home-fill"></i> 首页</a></li><li class="nav-item"><a class="nav-link" href="/categories/newsletter/"><i class="iconfont icon-mail"></i> 周刊</a></li><li class="nav-item"><a class="nav-link" href="/archives/"><i class="iconfont icon-archive-fill"></i> 归档</a></li><li class="nav-item"><a class="nav-link" href="/about/"><i class="iconfont icon-user-fill"></i> 关于</a></li><li class="nav-item dropdown"><a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="iconfont icon-books"></i> 更多</a><div class="dropdown-menu" aria-labelledby="navbarDropdown"><a class="dropdown-item" href="/categories/"><i class="iconfont icon-category-fill"></i> 分类 </a><a class="dropdown-item" href="/tags/"><i class="iconfont icon-tags-fill"></i> 标签 </a><a class="dropdown-item" href="/atom.xml"><i class="iconfont icon-rss-fill"></i> RSS</a></div></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">&nbsp;<i class="iconfont icon-search"></i>&nbsp;</a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/suncle-banner.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle">Python面向对象基础</span></div><div class="mt-3"><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2017-03-08 12:22" pubdate>2017年3月8日 中午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 14k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 114 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar category-bar" style="margin-right:-1rem"><div class="category-list"><div class="category row nomargin-x"><a class="category-item list-group-item category-item-action col-10 col-md-11 col-xm-11" title="python" id="heading-23eeeb4347bdd26bfc6b7ee9a3b755dd" role="tab" data-toggle="collapse" href="#collapse-23eeeb4347bdd26bfc6b7ee9a3b755dd" aria-expanded="true">python <span class="list-group-count">(32)</span> <i class="iconfont icon-arrowright"></i></a><div class="category-collapse collapse show" id="collapse-23eeeb4347bdd26bfc6b7ee9a3b755dd" role="tabpanel" aria-labelledby="heading-23eeeb4347bdd26bfc6b7ee9a3b755dd"><div class="category-post-list"><a href="/posts/2114861712.html" title="Python Google Protocol Buffer" class="list-group-item list-group-item-action"><span class="category-post">Python Google Protocol Buffer</span> </a><a href="/posts/3838453869.html" title="Python IO" class="list-group-item list-group-item-action"><span class="category-post">Python IO</span> </a><a href="/posts/501648532.html" title="Python-WSGI接口" class="list-group-item list-group-item-action"><span class="category-post">Python-WSGI接口</span> </a><a href="/posts/1140005001.html" title="Python-pymysql" class="list-group-item list-group-item-action"><span class="category-post">Python-pymysql</span> </a><a href="/posts/3371524817.html" title="Python函数" class="list-group-item list-group-item-action"><span class="category-post">Python函数</span> </a><a href="/posts/3373145519.html" title="Python函数定义及参数详解" class="list-group-item list-group-item-action"><span class="category-post">Python函数定义及参数详解</span> </a><a href="/posts/3953642204.html" title="Python单元测试" class="list-group-item list-group-item-action"><span class="category-post">Python单元测试</span> </a><a href="/posts/2639636733.html" title="Python基本数据类型-list-tuple-dict-set" class="list-group-item list-group-item-action"><span class="category-post">Python基本数据类型-list-tuple-dict-set</span> </a><a href="/posts/4097981062.html" title="Python多线程" class="list-group-item list-group-item-action"><span class="category-post">Python多线程</span> </a><a href="/posts/1609178714.html" title="Python字符串" class="list-group-item list-group-item-action"><span class="category-post">Python字符串</span> </a><a href="/posts/3043416172.html" title="Python实现通用web框架" class="list-group-item list-group-item-action"><span class="category-post">Python实现通用web框架</span> </a><a href="/posts/2568280681.html" title="Python常用模块集锦" class="list-group-item list-group-item-action"><span class="category-post">Python常用模块集锦</span> </a><a href="/posts/668369792.html" title="Python异常处理" class="list-group-item list-group-item-action"><span class="category-post">Python异常处理</span> </a><a href="/posts/3005931287.html" title="Python拉链法和开地址法实现字典" class="list-group-item list-group-item-action"><span class="category-post">Python拉链法和开地址法实现字典</span> </a><a href="/posts/1516127351.html" title="Python描述器" class="list-group-item list-group-item-action"><span class="category-post">Python描述器</span> </a><a href="/posts/2253555633.html" title="Python时间模块常用操作总结" class="list-group-item list-group-item-action"><span class="category-post">Python时间模块常用操作总结</span> </a><a href="/posts/858751997.html" title="Python答疑解惑" class="list-group-item list-group-item-action"><span class="category-post">Python答疑解惑</span> </a><a href="/posts/3541559492.html" title="Python网络编程" class="list-group-item list-group-item-action"><span class="category-post">Python网络编程</span> </a><a href="/posts/2033838900.html" title="Python装饰器" class="list-group-item list-group-item-action"><span class="category-post">Python装饰器</span> </a><a href="/posts/106366875.html" title="Python装饰器实现函数动态类型检查" class="list-group-item list-group-item-action"><span class="category-post">Python装饰器实现函数动态类型检查</span> </a><a href="/posts/2276895921.html" title="Python解构与封装" class="list-group-item list-group-item-action"><span class="category-post">Python解构与封装</span> </a><a href="/posts/2607945880.html" title="Python解析式" class="list-group-item list-group-item-action"><span class="category-post">Python解析式</span> </a><a href="/posts/3226889536.html" title="Python面向对象基础" class="list-group-item list-group-item-action active"><span class="category-post">Python面向对象基础</span> </a><a href="/posts/2725239063.html" title="Python面向对象的魔术方法" class="list-group-item list-group-item-action"><span class="category-post">Python面向对象的魔术方法</span> </a><a href="/posts/1924480698.html" title="SQLAlchemy使用" class="list-group-item list-group-item-action"><span class="category-post">SQLAlchemy使用</span> </a><a href="/posts/599780751.html" title="【填坑系列】Python习题集" class="list-group-item list-group-item-action"><span class="category-post">【填坑系列】Python习题集</span> </a><a href="/posts/2323272316.html" title="【填坑系列】Python基础知识总目录" class="list-group-item list-group-item-action"><span class="category-post">【填坑系列】Python基础知识总目录</span> </a><a href="/posts/139111991.html" title="从Python调用堆栈获取行号等信息" class="list-group-item list-group-item-action"><span class="category-post">从Python调用堆栈获取行号等信息</span> </a><a href="/posts/10731460.html" title="使用Google翻译Api" class="list-group-item list-group-item-action"><span class="category-post">使用Google翻译Api</span> </a><a href="/posts/4100952181.html" title="微博爬取热搜榜和热门话题" class="list-group-item list-group-item-action"><span class="category-post">微博爬取热搜榜和热门话题</span> </a><a href="/posts/3984252732.html" title="设计一个基于flask的高并发高可用的查询ip的http服务" class="list-group-item list-group-item-action"><span class="category-post">设计一个基于flask的高并发高可用的查询ip的http服务</span> </a><a href="/posts/1143805574.html" title="详解supervisor进程管理" class="list-group-item list-group-item-action"><span class="category-post">详解supervisor进程管理</span></a></div></div></div></div></aside></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 style="display:none">Python面向对象基础</h1><div class="markdown-body"><h1 id="类的定义"><a href="#类的定义" class="headerlink" title="类的定义"></a>类的定义</h1><p>类的定义的语法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ClassName</span>:<br>    &lt;statement-<span class="hljs-number">1</span>&gt;<br>    .<br>    .<br>    .<br>    &lt;statement-N&gt;<br></code></pre></td></tr></table></figure><p>示例代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Door</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, number, status</span>):<br>        self.number = number<br>        self.status = status<br></code></pre></td></tr></table></figure><span id="more"></span><h1 id="类的实例化"><a href="#类的实例化" class="headerlink" title="类的实例化"></a>类的实例化</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Door</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, number, status</span>):<br>        self.number = number<br>        self.status = status<br><br>door = Door(<span class="hljs-number">1001</span>, <span class="hljs-string">&#x27;open&#x27;</span>)<br>door.number<br>door.status<br></code></pre></td></tr></table></figure><ul><li>创建对象使用<code>类名(__init__ 函数除第一个参数外的参数列表)</code></li><li>创建对象的时候实际执行了 <code>__init__</code>函数</li><li><code>__init__</code> 函数并不会创建对象</li></ul><p>函数创建及初始化的过程</p><ol><li>首先创建对象</li><li>对象作为self参数传递给<code>__init__</code>函数</li><li>返回self</li></ol><h1 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h1><h2 id="类变量"><a href="#类变量" class="headerlink" title="类变量"></a>类变量</h2><p>示例代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>   ...:         NAME = <span class="hljs-string">&#x27;A&#x27;</span>  <span class="hljs-comment"># 类的直接下级作用域 叫做类变量</span><br>   ...:         <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>   ...:             self.name = name  <span class="hljs-comment"># 关联到实例的变量 叫做实例变量</span><br>   ...:          <br><br>In [<span class="hljs-number">2</span>]: a = A(<span class="hljs-string">&#x27;a&#x27;</span>)<br><br>In [<span class="hljs-number">3</span>]: a.NAME<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">4</span>]: a.name<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-string">&#x27;a&#x27;</span><br><br>In [<span class="hljs-number">5</span>]: A.NAME<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">6</span>]: A.name<br>---------------------------------------------------------------------------<br>AttributeError                            Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">6</span>-61c1cc534250&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> A.name<br><br>AttributeError: <span class="hljs-built_in">type</span> <span class="hljs-built_in">object</span> <span class="hljs-string">&#x27;A&#x27;</span> has no attribute <span class="hljs-string">&#x27;name&#x27;</span><br><br>In [<span class="hljs-number">7</span>]: a2 = A(<span class="hljs-string">&#x27;a2&#x27;</span>)<br><br>In [<span class="hljs-number">8</span>]: a2.NAME<br>Out[<span class="hljs-number">8</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">9</span>]: a2.NAME = <span class="hljs-string">&#x27;A2&#x27;</span>  <span class="hljs-comment"># 给示例a2的类变量NAME赋值</span><br><br>In [<span class="hljs-number">10</span>]: a2.NAME<br>Out[<span class="hljs-number">10</span>]: <span class="hljs-string">&#x27;A2&#x27;</span><br><br>In [<span class="hljs-number">11</span>]: a.NAME<br>Out[<span class="hljs-number">11</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">12</span>]: A.NAME  <span class="hljs-comment"># 类变量没有变化</span><br>Out[<span class="hljs-number">12</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">13</span>]: a2.xxx = <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">14</span>]: a2.xxx  <span class="hljs-comment"># 赋值之后a2多了xxx属性</span><br>Out[<span class="hljs-number">14</span>]: <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">15</span>]: A.NAME = <span class="hljs-string">&#x27;AA&#x27;</span>  <span class="hljs-comment"># 直接修改类的类变量</span><br><br>In [<span class="hljs-number">16</span>]: A.NAME<br>Out[<span class="hljs-number">16</span>]: <span class="hljs-string">&#x27;AA&#x27;</span><br><br>In [<span class="hljs-number">17</span>]: a.NAME  <span class="hljs-comment"># 对应的实例的类变量也发生了改变</span><br>Out[<span class="hljs-number">17</span>]: <span class="hljs-string">&#x27;AA&#x27;</span><br><br>In [<span class="hljs-number">18</span>]: a2.NAME  <span class="hljs-comment"># a2的类变量在之前的赋值被覆盖了，因此改变类变量的并不会影响a2</span><br>Out[<span class="hljs-number">18</span>]: <span class="hljs-string">&#x27;A2&#x27;</span><br></code></pre></td></tr></table></figure><p>所以</p><ul><li>类变量对类和实例都可见</li><li>所有实例共享类变量</li><li>当给实例的类变量赋值时，相当于动态的给这个实例增加了一个属性，覆盖了类变量</li></ul><h2 id="属性查找顺序"><a href="#属性查找顺序" class="headerlink" title="属性查找顺序"></a>属性查找顺序</h2><ul><li><code>__dict__</code>： 实例变量的字典</li><li><code>__class__</code>： 得到实例对应的类</li><li>先查找<code>__dict__</code>在查找<code>__class__</code></li></ul><p>代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>   ...:     NAME = <span class="hljs-string">&#x27;A&#x27;</span><br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, name</span>):<br>   ...:         self.name = name<br>   ...:         <br><br>In [<span class="hljs-number">2</span>]: a = A(<span class="hljs-string">&#x27;a&#x27;</span>)<br><br>In [<span class="hljs-number">3</span>]: a.NAME<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">4</span>]: a.__class__.NAME<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">5</span>]: a.__dict__<br>Out[<span class="hljs-number">5</span>]: &#123;<span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;a&#x27;</span>&#125;<br><br>In [<span class="hljs-number">6</span>]: a.__class__  <span class="hljs-comment"># a.__class__表示实例对应的类</span><br>Out[<span class="hljs-number">6</span>]: __main__.A<br><br>In [<span class="hljs-number">7</span>]: a.NAME = <span class="hljs-string">&#x27;AA&#x27;</span><br><br>In [<span class="hljs-number">8</span>]: a.__dict__  <span class="hljs-comment"># 覆盖类变量之后__dict__增加了一个键值对</span><br>Out[<span class="hljs-number">8</span>]: &#123;<span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;AA&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;a&#x27;</span>&#125;<br><br>In [<span class="hljs-number">9</span>]: a.__dict__[<span class="hljs-string">&#x27;NAME&#x27;</span>] = <span class="hljs-string">&#x27;AAA&#x27;</span>  <span class="hljs-comment"># 可以直接修改__dict__</span><br><br>In [<span class="hljs-number">10</span>]: a.__dict__<br>Out[<span class="hljs-number">10</span>]: &#123;<span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;AAA&#x27;</span>, <span class="hljs-string">&#x27;name&#x27;</span>: <span class="hljs-string">&#x27;a&#x27;</span>&#125;<br><br>In [<span class="hljs-number">11</span>]: a.__class__.NAME<br>Out[<span class="hljs-number">11</span>]: <span class="hljs-string">&#x27;A&#x27;</span><br><br>In [<span class="hljs-number">12</span>]: a.__class__.__dict__<br>Out[<span class="hljs-number">12</span>]: <br>mappingproxy(&#123;<span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;A&#x27;</span>,<br>              <span class="hljs-string">&#x27;__dict__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__dict__&#x27;</span> of <span class="hljs-string">&#x27;A&#x27;</span> objects&gt;,<br>              <span class="hljs-string">&#x27;__doc__&#x27;</span>: <span class="hljs-literal">None</span>,<br>              <span class="hljs-string">&#x27;__init__&#x27;</span>: &lt;function __main__.A.__init__&gt;,<br>              <span class="hljs-string">&#x27;__module__&#x27;</span>: <span class="hljs-string">&#x27;__main__&#x27;</span>,<br>              <span class="hljs-string">&#x27;__weakref__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__weakref__&#x27;</span> of <span class="hljs-string">&#x27;A&#x27;</span> objects&gt;&#125;)<br><br></code></pre></td></tr></table></figure><h2 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h2><p>参数是一个类，并且返回一个类的函数就可以是一个类装饰器。</p><p>类装饰器通常用于给类增加属性，如果增加方法，则都是类级的方法。</p><p><strong>代码1：给类增加属性</strong></p><p>函数方法增加：定义set_name函数给类F增加一个NAME属性</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">class</span> <span class="hljs-title class_">F</span>:<br>   ...:     <span class="hljs-keyword">pass</span><br>   ...: <br><br>In [<span class="hljs-number">2</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_name</span>(<span class="hljs-params">cls, name</span>):  <span class="hljs-comment"># 给cls增加属性NAME=name</span><br>   ...:     cls.NAME = name<br>   ...:     <span class="hljs-keyword">return</span> cls<br>   ...: <br><br>In [<span class="hljs-number">3</span>]: F1 = set_name(F, <span class="hljs-string">&#x27;F&#x27;</span>)  <span class="hljs-comment"># 返回F本身，并且F1指向F</span><br><br>In [<span class="hljs-number">4</span>]: F1.NAME<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-string">&#x27;F&#x27;</span><br><br>In [<span class="hljs-number">5</span>]: f1 = F1()<br><br>In [<span class="hljs-number">6</span>]: f1.NAME<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-string">&#x27;F&#x27;</span><br><br>In [<span class="hljs-number">7</span>]: F1.__dict__<br>Out[<span class="hljs-number">7</span>]: <br>mappingproxy(&#123;<span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;F&#x27;</span>,<br>              <span class="hljs-string">&#x27;__dict__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__dict__&#x27;</span> of <span class="hljs-string">&#x27;F&#x27;</span> objects&gt;,<br>              <span class="hljs-string">&#x27;__doc__&#x27;</span>: <span class="hljs-literal">None</span>,<br>              <span class="hljs-string">&#x27;__module__&#x27;</span>: <span class="hljs-string">&#x27;__main__&#x27;</span>,<br>              <span class="hljs-string">&#x27;__weakref__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__weakref__&#x27;</span> of <span class="hljs-string">&#x27;F&#x27;</span> objects&gt;&#125;)<br><br>In [<span class="hljs-number">8</span>]: f1.__dict__<br>Out[<span class="hljs-number">8</span>]: &#123;&#125;<br><br>In [<span class="hljs-number">9</span>]: f1.__class__<br>Out[<span class="hljs-number">9</span>]: __main__.F<br><br>In [<span class="hljs-number">10</span>]: F.__dict__  <span class="hljs-comment"># 本质上增加的还是类F</span><br>Out[<span class="hljs-number">10</span>]: <br>mappingproxy(&#123;<span class="hljs-string">&#x27;NAME&#x27;</span>: <span class="hljs-string">&#x27;F&#x27;</span>,<br>              <span class="hljs-string">&#x27;__dict__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__dict__&#x27;</span> of <span class="hljs-string">&#x27;F&#x27;</span> objects&gt;,<br>              <span class="hljs-string">&#x27;__doc__&#x27;</span>: <span class="hljs-literal">None</span>,<br>              <span class="hljs-string">&#x27;__module__&#x27;</span>: <span class="hljs-string">&#x27;__main__&#x27;</span>,<br>              <span class="hljs-string">&#x27;__weakref__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__weakref__&#x27;</span> of <span class="hljs-string">&#x27;F&#x27;</span> objects&gt;&#125;)<br></code></pre></td></tr></table></figure><p>对set_name函数进行柯里化，实现带参数的类装饰器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">2</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_name</span>(<span class="hljs-params">name</span>):   <span class="hljs-comment"># 传入参数name</span><br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">wrap</span>(<span class="hljs-params">cls</span>):   <span class="hljs-comment"># 装饰器是wrap</span><br>   ...:         cls.NAME = name<br>   ...:         <span class="hljs-keyword">return</span> cls<br>   ...:     <span class="hljs-keyword">return</span> wrap<br>   ...: <br><br>In [<span class="hljs-number">3</span>]: @set_name(<span class="hljs-string">&#x27;G&#x27;</span>)<br>   ...: <span class="hljs-keyword">class</span> <span class="hljs-title class_">G</span>:<br>   ...:     <span class="hljs-keyword">pass</span><br>   ...: <br><br>In [<span class="hljs-number">4</span>]: G.NAME<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-string">&#x27;G&#x27;</span><br><br>In [<span class="hljs-number">5</span>]: <span class="hljs-keyword">class</span> <span class="hljs-title class_">G</span>:<br>   ...:     <span class="hljs-keyword">pass</span><br>   ...: <br><br>In [<span class="hljs-number">6</span>]: G = set_name(<span class="hljs-string">&#x27;G&#x27;</span>)(G)  <span class="hljs-comment"># 装饰器的函数调用方法</span><br><br>In [<span class="hljs-number">7</span>]: G.NAME<br>Out[<span class="hljs-number">7</span>]: <span class="hljs-string">&#x27;G&#x27;</span><br></code></pre></td></tr></table></figure><p><strong>代码2：给类增加方法</strong></p><p>类装饰器<code>get_name</code>给类H增加一个方法<code>__get_name__</code></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_name</span>(<span class="hljs-params">cls</span>):<br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">_get_name</span>(<span class="hljs-params">self</span>):<br>   ...:         <span class="hljs-keyword">return</span> cls.__name__<br>   ...:     cls.__get_name__ = _get_name  <span class="hljs-comment"># 给cls增加__get_name__指向_get_name</span><br>   ...:     <span class="hljs-keyword">return</span> cls<br>   ...: <br><br>In [<span class="hljs-number">2</span>]: @get_name<br>   ...: <span class="hljs-keyword">class</span> <span class="hljs-title class_">H</span>:<br>   ...:     <span class="hljs-keyword">pass</span><br>   ...: <br><br>In [<span class="hljs-number">3</span>]: h = H()<br><br>In [<span class="hljs-number">4</span>]: h.__get_name__()<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-string">&#x27;H&#x27;</span><br><br>In [<span class="hljs-number">5</span>]: H.__dict__<br>Out[<span class="hljs-number">5</span>]: <br>mappingproxy(&#123;<span class="hljs-string">&#x27;__dict__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__dict__&#x27;</span> of <span class="hljs-string">&#x27;H&#x27;</span> objects&gt;,<br>              <span class="hljs-string">&#x27;__doc__&#x27;</span>: <span class="hljs-literal">None</span>,<br>              <span class="hljs-string">&#x27;__get_name__&#x27;</span>: &lt;function __main__.get_name.&lt;<span class="hljs-built_in">locals</span>&gt;._get_name&gt;,<br>              <span class="hljs-string">&#x27;__module__&#x27;</span>: <span class="hljs-string">&#x27;__main__&#x27;</span>,<br>              <span class="hljs-string">&#x27;__weakref__&#x27;</span>: &lt;attribute <span class="hljs-string">&#x27;__weakref__&#x27;</span> of <span class="hljs-string">&#x27;H&#x27;</span> objects&gt;&#125;)<br></code></pre></td></tr></table></figure><h2 id="类方法-x2F-静态方法"><a href="#类方法-x2F-静态方法" class="headerlink" title="类方法&#x2F;静态方法"></a>类方法&#x2F;静态方法</h2><p>方法的定义都是类级的，但是有的方法使用实例调用，有的方法使用类来调用</p><ul><li>类方法：当一个方法，被classmethod装饰时， 第一个参数会变成类本身， 这样的方法叫类方法</li><li>当一个方法， 被staticmethod装饰的时候，不会自动传递第一个参数， 这样的方法叫静态方法</li></ul><p><strong>代码</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">I</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment"># 实例方法</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;instance method&#x27;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">class_print</span>(<span class="hljs-params">cls</span>):  <span class="hljs-comment"># 类方法</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-built_in">id</span>(cls))<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;class method&#x27;</span>)<br><br><span class="hljs-meta">    @staticmethod </span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">static_print</span>():  <span class="hljs-comment"># 静态方法</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;static method&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">xxx_print</span>():  <span class="hljs-comment"># 一个普通方法</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;this is a function&#x27;</span>)<br></code></pre></td></tr></table></figure><ul><li>实例方法只能由实例调用</li><li>类方法可以被类和实例使用，并且被实例使用时，传入的第一个参数还是类</li><li>静态方法可以被类和实例使用，都不会传入第一个参数</li><li>类中的普通方法，因为没有传入self，因此只能被类使用，实例无法使用</li><li>各种方法根据首参来决定。</li></ul><h1 id="访问控制"><a href="#访问控制" class="headerlink" title="访问控制"></a>访问控制</h1><h2 id="双下划线"><a href="#双下划线" class="headerlink" title="双下划线"></a>双下划线</h2><ul><li>所有<strong>双下划线开始，非双下划线结尾</strong>的成员，都是私有成员</li><li>严格的说， Python里没有真正私有成员</li><li>Python的私有成员是通过<strong>改名</strong>实现的：_类名 + 带双下划綫的属性</li><li><strong>除非真的有必要，并且清除明白的知道会有什么后果，否则不要通过改名规则修改私有成员</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">class</span> <span class="hljs-title class_">Door</span>:<br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, number, status</span>):<br>   ...:         self.number = number<br>   ...:         self.__status = status  <span class="hljs-comment"># 双下划线开始， 非双下划綫结尾的都是私有的， 在类外部无法访问</span><br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">open</span>(<span class="hljs-params">self</span>):<br>   ...:         self.__status = <span class="hljs-string">&#x27;opening&#x27;</span><br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">close</span>(<span class="hljs-params">self</span>):<br>   ...:         self.__status = <span class="hljs-string">&#x27;closed&#x27;</span><br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">status</span>(<span class="hljs-params">self</span>):<br>   ...:         <span class="hljs-keyword">return</span> self.__status<br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">__set_number</span>(<span class="hljs-params">self, number</span>):  <span class="hljs-comment"># # 双下滑先开始， 非双下划线结尾的方法也是私有方法</span><br>   ...:         self.number = number<br>   ...:         <br><br>In [<span class="hljs-number">2</span>]: door = Door(<span class="hljs-number">1001</span>, <span class="hljs-string">&#x27;closed&#x27;</span>)<br><br>In [<span class="hljs-number">3</span>]: door.__status  <span class="hljs-comment"># 无法访问私有属性</span><br>---------------------------------------------------------------------------<br>AttributeError                            Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">3</span>-d55234f04e7f&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> door.__status<br><br>AttributeError: <span class="hljs-string">&#x27;Door&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;__status&#x27;</span><br><br>In [<span class="hljs-number">4</span>]: door.__dict__  <span class="hljs-comment"># door对象含有的属性_Door__status</span><br>Out[<span class="hljs-number">4</span>]: &#123;<span class="hljs-string">&#x27;_Door__status&#x27;</span>: <span class="hljs-string">&#x27;closed&#x27;</span>, <span class="hljs-string">&#x27;number&#x27;</span>: <span class="hljs-number">1001</span>&#125;<br><br>In [<span class="hljs-number">5</span>]: door.__status = <span class="hljs-string">&#x27;hahaha&#x27;</span>  <span class="hljs-comment"># 给对象创建了新的属性，并没有修改到__status</span><br><br>In [<span class="hljs-number">6</span>]: door.__status<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-string">&#x27;hahaha&#x27;</span><br><br>In [<span class="hljs-number">7</span>]: door.__dict__<br>Out[<span class="hljs-number">7</span>]: &#123;<span class="hljs-string">&#x27;_Door__status&#x27;</span>: <span class="hljs-string">&#x27;closed&#x27;</span>, <span class="hljs-string">&#x27;__status&#x27;</span>: <span class="hljs-string">&#x27;hahaha&#x27;</span>, <span class="hljs-string">&#x27;number&#x27;</span>: <span class="hljs-number">1001</span>&#125;<br><br>In [<span class="hljs-number">8</span>]: door.status()<br>Out[<span class="hljs-number">8</span>]: <span class="hljs-string">&#x27;closed&#x27;</span><br><br>In [<span class="hljs-number">9</span>]: door.<span class="hljs-built_in">open</span>()<br><br>In [<span class="hljs-number">10</span>]: door.status()<br>Out[<span class="hljs-number">10</span>]: <span class="hljs-string">&#x27;opening&#x27;</span><br><br>In [<span class="hljs-number">11</span>]: door.__set_number(<span class="hljs-number">1002</span>)<br>---------------------------------------------------------------------------<br>AttributeError                            Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">11</span>-888a73f63746&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> door.__set_number(<span class="hljs-number">1002</span>)<br><br>AttributeError: <span class="hljs-string">&#x27;Door&#x27;</span> <span class="hljs-built_in">object</span> has no attribute <span class="hljs-string">&#x27;__set_number&#x27;</span><br><br>In [<span class="hljs-number">12</span>]: door._Door__status<br>Out[<span class="hljs-number">12</span>]: <span class="hljs-string">&#x27;opening&#x27;</span><br><br>In [<span class="hljs-number">13</span>]: door._Door__status = <span class="hljs-string">&#x27;hehehe&#x27;</span>  <span class="hljs-comment"># _类名 + 带双下划綫的属性的方式直接修改私有成员</span><br><br>In [<span class="hljs-number">14</span>]: door.status()<br>Out[<span class="hljs-number">14</span>]: <span class="hljs-string">&#x27;hehehe&#x27;</span><br></code></pre></td></tr></table></figure><h2 id="单下划线"><a href="#单下划线" class="headerlink" title="单下划线"></a>单下划线</h2><ul><li>单下划线是一种惯用法， 人为标记此成员为私有， 但是解释器不不做任何处理</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>   ...:         self._a = <span class="hljs-number">3</span><br>   ...:         <br><br>In [<span class="hljs-number">2</span>]: a = A()<br><br>In [<span class="hljs-number">3</span>]: a._a<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">4</span>]: a._a = <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">5</span>]: a._a<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">6</span>]: a.__dict__<br>Out[<span class="hljs-number">6</span>]: &#123;<span class="hljs-string">&#x27;_a&#x27;</span>: <span class="hljs-number">4</span>&#125;<br><br></code></pre></td></tr></table></figure><h2 id="property装饰器"><a href="#property装饰器" class="headerlink" title="property装饰器"></a>property装饰器</h2><p><strong>引入property装饰器</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Door</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, number</span>):<br>        self.__number = number<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">get_number</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.__number<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">set_number</span>(<span class="hljs-params">self, number</span>):<br>        self.__number = number<br></code></pre></td></tr></table></figure><p>当把<code>number</code>属性变成私有属性<code>__number</code>之后，无法直接访问得到，只能通过<code>get_number</code>和<code>set_number</code>两个函数访问<code>__number</code>属性。</p><p>如果既能限制参数访问，又可以用类似属性这样简单的方式来访问类的变量，这个时候就可以使用property装饰器了。</p><ul><li><strong>Python内置的<code>@property</code>装饰器就是负责把一个方法变成属性调用的</strong></li></ul><p><strong>property装饰器使用</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Door</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, number</span>):<br>        self.__number = number<br><br>    <span class="hljs-comment"># property 装饰器会把一个仅有self参数的函数，变成一个属性， 属性的值，为方法的返回值</span><br><span class="hljs-meta">    @property</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">number</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self.__number<br><br>    <span class="hljs-comment"># property setter 装饰器， 可以把一个方法转化为对此赋值，但此方法有一定要求</span><br>    <span class="hljs-comment"># 1.同名 2.必须接收两个参数 self 和 value， value为所赋的值</span><br><span class="hljs-meta">    @number.setter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">number</span>(<span class="hljs-params">self, number</span>):<br>        self.__number = number<br><br><span class="hljs-meta">    @number.deleter</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">number</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;cannot remove number property&#x27;</span>)<br><br>door = Door(<span class="hljs-number">1001</span>)<br>door.number  <span class="hljs-comment"># 返回1001</span><br>door.number = <span class="hljs-number">1002</span><br>door.number  <span class="hljs-comment"># 返回1002</span><br><span class="hljs-keyword">del</span> door.number  <span class="hljs-comment"># 输出cannot remove number property</span><br></code></pre></td></tr></table></figure><h1 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h1><h2 id="单继承"><a href="#单继承" class="headerlink" title="单继承"></a>单继承</h2><ul><li>在类名后加括号 括号中是继承列表， 称之为父类或者基类或者超类</li><li>继承一个明显的好处就是可以获取父类的属性和方法</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>:<br>    PUBLIC_CLASS_VAR = <span class="hljs-string">&#x27;PUBLIC_CLASS_VAR&#x27;</span><br>    __PRIVATE_CLASS_VAR = <span class="hljs-string">&#x27;PRIVATE_CLASS_VAR&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.public_instance_var = <span class="hljs-string">&#x27;public_instance_var&#x27;</span><br>        self.__private_instance_var = <span class="hljs-string">&#x27;private__instance_var&#x27;</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">public_class_method</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;public_class_method&#x27;</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__private_class_method</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;private_class_method&#x27;</span><br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">public_static_method</span>():<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;public static method&#x27;</span><br><br><span class="hljs-meta">    @staticmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__private_static_method</span>():<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;private static method&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">public_instance_method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;public_instance_method&#x27;</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__private_instance_method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;private_instance_method&#x27;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sub</span>(<span class="hljs-title class_ inherited__">Base</span>):<br>    <span class="hljs-keyword">pass</span><br><br>sub = Sub()<br>sub.__dict__<br><span class="hljs-comment"># 输出</span><br>&#123;<span class="hljs-string">&#x27;_Base__private_instance_var&#x27;</span>: <span class="hljs-string">&#x27;private__instance_var&#x27;</span>,<br> <span class="hljs-string">&#x27;public_instance_var&#x27;</span>: <span class="hljs-string">&#x27;public_instance_var&#x27;</span>&#125;<br></code></pre></td></tr></table></figure><ul><li>凡是公有的都能继承</li><li>凡是私有的都不能继承</li><li>原来是什么，继承过来还是什么</li></ul><h2 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h2><ul><li>当子类和父类有同名成员的时候， 子类的成员会覆盖父类的同名成员</li><li>当父类含有一个带参数的初始化方法的时候，子类一定需要一个初始化方法，并且在初始化方法中调用父类的初始化方法</li><li>super方法：super(type, obj) &#x3D;》type:类名，obj:传递给后续方法的第一个参数</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self</span>):<br>        self.__a = <span class="hljs-number">4</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Base.print&#x27;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_print</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Base.cls_print&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sub</span>(<span class="hljs-title class_ inherited__">Base</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print</span>(<span class="hljs-params">self</span>):  <span class="hljs-comment">## 当子类和父类有同名成员的时候， 子类的成员会覆盖父类的同名成员</span><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Sub.print&#x27;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_print</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Sub.cls_print&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># 调用父类的print</span><br>        <span class="hljs-built_in">super</span>().<span class="hljs-built_in">print</span>()<br>        <span class="hljs-comment"># super(Sub, self).print()</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_foo</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-comment">#cls.cls_print()</span><br>        <span class="hljs-comment">#Base.cls_print()</span><br>        <span class="hljs-built_in">super</span>().cls_print()<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubSub</span>(<span class="hljs-title class_ inherited__">Sub</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">print</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;SubSub.print&#x27;</span>)<br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_print</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;SubSub.cls_print&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-comment"># 调用Base的print</span><br>        <span class="hljs-built_in">super</span>(SubSub, self).<span class="hljs-built_in">print</span>()<br>        <span class="hljs-comment"># 代理 TYPE 的父类的方法， 并且使用 obj 绑定  第一个参数 指定调用谁的直接父类， 第二个参数指定当调用时，传递什么作为方法的第一个参数</span><br>        <span class="hljs-built_in">super</span>(Sub, self).<span class="hljs-built_in">print</span>()<br>        <span class="hljs-built_in">super</span>(SubSub, SubSub).cls_print()  <span class="hljs-comment"># 类方法的时候可以传递类，也可以传递实例self</span><br><br><span class="hljs-meta">    @classmethod</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">cls_foo</span>(<span class="hljs-params">cls</span>):<br>        <span class="hljs-comment"># Base.cls_print()</span><br>        <span class="hljs-built_in">super</span>(Sub, cls).cls_print()<br><br></code></pre></td></tr></table></figure><h2 id="多继承与MRO"><a href="#多继承与MRO" class="headerlink" title="多继承与MRO"></a>多继承与MRO</h2><h3 id="等效的类定义"><a href="#等效的类定义" class="headerlink" title="等效的类定义"></a>等效的类定义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>(<span class="hljs-title class_ inherited__">object</span>):<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>():<br>    passs<br></code></pre></td></tr></table></figure><h3 id="多继承"><a href="#多继承" class="headerlink" title="多继承"></a>多继承</h3><ul><li>在继承列表里存在多个类的时候表示多继承</li><li>多继承会把继承列表里的所有公有成员都继承过来</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;method of A&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;method of B&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>(A, B):<br>    <span class="hljs-keyword">pass</span><br><br>c = C()<br>c.method()  <span class="hljs-comment"># 输出method of A</span><br></code></pre></td></tr></table></figure><h3 id="MRO"><a href="#MRO" class="headerlink" title="MRO"></a>MRO</h3><p>定义一个多继承，如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">A</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;method of A&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">B</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;method of B&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">C</span>(A, B):<br>    <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">E</span>(<span class="hljs-title class_ inherited__">A</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">method</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;method of E&#x27;</span>)<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">F</span>(E, A):<br>    <span class="hljs-keyword">pass</span><br><br>F().method()  <span class="hljs-comment"># 输出method of E</span><br></code></pre></td></tr></table></figure><p>如果定义类G继承自(A, E)，如下</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">G</span>(A, E):  <span class="hljs-comment"># 在定义的时候会直接报错</span><br>    <span class="hljs-keyword">pass</span><br><br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">51</span>-dcac33a3d00c&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">G</span>(A, E):<br>      <span class="hljs-number">2</span>     <span class="hljs-keyword">pass</span><br><br>TypeError: Cannot create a consistent method resolution<br>order (MRO) <span class="hljs-keyword">for</span> bases E, A<br></code></pre></td></tr></table></figure><p>报错显示：Cannot create a consistent method resolution order (MRO) for bases E, A</p><blockquote><p>方法解析顺序(MRO)不满足报错</p></blockquote><p><strong>分析基类E,A的MRO</strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-meta">&gt;&gt;&gt; </span>A.__mro__<br>(__main__.A, <span class="hljs-built_in">object</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>E.__mro__<br>(__main__.E, __main__.A, <span class="hljs-built_in">object</span>)<br><span class="hljs-meta">&gt;&gt;&gt; </span>F.__mro__<br>(__main__.F, __main__.E, __main__.A, <span class="hljs-built_in">object</span>)<br></code></pre></td></tr></table></figure><p>所以，mro序列就是继承的先后顺序</p><p>那么G类的mro序列应该就是(G, A, E, object)，Python通过C3算法来确定多继承的时候是否满足<strong>mro的两个原则</strong>：</p><ol><li>本地优先： 自己定义或重写的方法优先，按照继承列表，从左到右查找</li><li>单调性：所有子类，也要满足查找顺序</li></ol><p>C3算法的主要作用是：在多继承时判断属性来自于哪个类，无法判断时抛出TypeError</p><p><strong>C3算法</strong></p><figure class="highlight haskell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs haskell"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">B</span>(<span class="hljs-type">O</span>) ：则<span class="hljs-type">B</span>的mro序列为： [<span class="hljs-type">B</span>, <span class="hljs-type">O</span>]</span><br><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-type">B</span>(<span class="hljs-type">A1</span>, <span class="hljs-type">A2</span>, ..., <span class="hljs-type">An</span>) ：则<span class="hljs-type">B</span>的mro序列为： [<span class="hljs-type">B</span>] + merge(<span class="hljs-title">mro</span>(<span class="hljs-type">A1</span>), mro(<span class="hljs-type">A2</span>), ..., mro(<span class="hljs-type">An</span>), [<span class="hljs-type">A1</span>, <span class="hljs-type">A2</span>, ..., <span class="hljs-type">An</span>, <span class="hljs-type">O</span>])</span><br></code></pre></td></tr></table></figure><p>merge操作就是C3算法的核心，merge步骤如下：</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-bullet">*</span> 遍历列表<br><span class="hljs-bullet">*</span> 看第一个列表的首元素<br><span class="hljs-bullet">    *</span> 它在其他列表中也是首元素<br><span class="hljs-bullet">    *</span> 或者它在其他列表不存在<br><span class="hljs-bullet">*</span> 满足以上条件，则移除该首元素，合并到mro中<br><span class="hljs-bullet">*</span> 不满足，则抛出异常<br></code></pre></td></tr></table></figure><p><strong>C3算法分析F类的mro</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">mro</span><span class="hljs-params">(F)</span></span> -&gt; <span class="hljs-selector-attr">[F]</span> + <span class="hljs-built_in">merge</span>(<span class="hljs-built_in">mro</span>(E), <span class="hljs-built_in">mro</span>(A), <span class="hljs-selector-attr">[E, A, O]</span>)<br>	-&gt; <span class="hljs-selector-attr">[F]</span> + <span class="hljs-built_in">merge</span>(<span class="hljs-selector-attr">[E, A, O]</span>, <span class="hljs-selector-attr">[A, O]</span>, <span class="hljs-selector-attr">[E, A, O]</span>)<br>    -&gt; <span class="hljs-selector-attr">[F, E]</span> + <span class="hljs-built_in">merge</span>(<span class="hljs-selector-attr">[A, O]</span>, <span class="hljs-selector-attr">[A, O]</span>, <span class="hljs-selector-attr">[A, O]</span>)<br>    -&gt; <span class="hljs-selector-attr">[F, E, A]</span> + <span class="hljs-built_in">merge</span>(<span class="hljs-selector-attr">[O]</span>, <span class="hljs-selector-attr">[O]</span>, <span class="hljs-selector-attr">[O]</span>)<br>    -&gt; <span class="hljs-selector-attr">[F, E, A, O]</span><br></code></pre></td></tr></table></figure><p>merge操作成功，mro解析正确，最终mro为[F, E, A, O]</p><p><strong>C3算法分析G类的mro</strong></p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs stylus"><span class="hljs-function"><span class="hljs-title">mro</span><span class="hljs-params">(G)</span></span> -&gt; <span class="hljs-selector-attr">[G]</span> + <span class="hljs-built_in">merge</span>(<span class="hljs-built_in">mro</span>(A), <span class="hljs-built_in">mro</span>(E), <span class="hljs-selector-attr">[A, E, O]</span>)<br>	-&gt; <span class="hljs-selector-attr">[G]</span> + <span class="hljs-built_in">merge</span>(<span class="hljs-selector-attr">[A, O]</span>, <span class="hljs-selector-attr">[E, A, O]</span>, <span class="hljs-selector-attr">[A, E, O]</span>)<br>    -&gt; raise TypeError:<br></code></pre></td></tr></table></figure><p>第一个列表的首元素为A，在第二个列表中存在但不是首元素，不满足merge的条件，直接抛出异常。</p><p><strong>结论</strong>：</p><ol><li><strong>应该尽量避免多继承</strong></li><li>多继承会对程序的心智负担造成非常大的压力</li></ol><h2 id="Mixin类"><a href="#Mixin类" class="headerlink" title="Mixin类"></a>Mixin类</h2><p>参考</p><ol><li><a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014318680104044a55f4a9dbf8452caf71e8dc68b75a18000">廖雪峰-多重继承与MixIn</a></li><li><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/20778853">知乎-Mixin是什么概念?</a></li><li><a target="_blank" rel="noopener" href="https://python3-cookbook.readthedocs.io/zh_CN/latest/c08/p18_extending_classes_with_mixins.html">Python Cookbook-利用Mixins扩展类功能</a></li></ol><p>在编程中，mixin是指为继承自它的class提供额外的功能, 但它自身却是不单独使用的类.。在具有多继承能力的编程语言中， mixin可以为类增加额外功能或方法。</p><p>因此，MixIn模式的目的就是给一个类增加多个功能，这样，在设计类的时候，我们优先考虑通过多重继承来组合多个MixIn的功能，而不是设计多层次的复杂的继承关系。</p><p>在Python 3.5.2 源代码 socketserver.py 中的639到643行可以看到以下四个类的定义</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ForkingUDPServer</span>(ForkingMixIn, UDPServer): <span class="hljs-keyword">pass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ForkingTCPServer</span>(ForkingMixIn, TCPServer): <span class="hljs-keyword">pass</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadingUDPServer</span>(ThreadingMixIn, UDPServer): <span class="hljs-keyword">pass</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ThreadingTCPServer</span>(ThreadingMixIn, TCPServer): <span class="hljs-keyword">pass</span><br></code></pre></td></tr></table></figure><ul><li>BaseServer：server类的基类</li><li>UDPServer：UDP server class，继承自BaseServer</li><li>TCPServer：TCP server class，继承自BaseServer</li><li>ForkingMixIn：Mix-in class to handle each request in a new process.</li><li>ThreadingMixIn：Mix-in class to handle each request in a new thread.</li></ul><p>Python自带了<code>TCPServer</code>和<code>UDPServer</code>这两类网络服务，而要同时服务多个用户就必须使用多进程或多线程模型，这两种模型由<code>ForkingMixIn</code>和<code>ThreadingMixIn</code>提供。通过组合，就可以得到以上四个类。</p><p>这几个类之间的关系如下图：</p><p><img src="https://flowsnow.oss-cn-shanghai.aliyuncs.com/history/image/MixIn.jpg" srcset="/img/loading.gif" lazyload alt="socketserver继承关系"></p><p>可以看到，从BaseServer开始逐层继承的过程中，混入(MixIn)了ForkingMixIn类和ThreadingMixIn类。</p><p>这样的多重继承的技巧称为MixIn。</p><p>如果不采用MixIn技术，而是采用层次复杂的单继承实现，则类的数量会呈指数增长。</p><p>具体不采用MixIn技术设计的继承层次关系参见：<a target="_blank" rel="noopener" href="http://www.liaoxuefeng.com/wiki/0014316089557264a6b348958f449949df42a6d3a2e542c000/0014318680104044a55f4a9dbf8452caf71e8dc68b75a18000">廖雪峰-多重继承与MixIn</a>中的Animal类的设计思路。</p><p><strong>MixIn总结</strong></p><p>MixIn其实也是一种组合的方式。通常来说，组合优于继承</p><p>Mixin 类的限制</p><ul><li>Mixin类不应该有初始化方法</li><li>Mixin类通常不能独立工作</li><li>Mixin类的祖先也应该是Mixin类</li></ul><p>通常情况下，Mixin类总在继承列表的第一位</p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/python/" class="category-chain-item">python</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/Python/">#Python</a> <a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/">#面向对象</a></div></div><div class="license-box my-3"><div class="license-title"><div>Python面向对象基础</div><div>https://suncle.me/posts/3226889536.html</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Suncle Chen</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2017年3月8日</div></div><div class="license-meta-item"><div>许可协议</div><div><a target="_blank" href="https://creativecommons.org/licenses/by/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/posts/2725239063.html" title="Python面向对象的魔术方法"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">Python面向对象的魔术方法</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/posts/668369792.html" title="Python异常处理"><span class="hidden-mobile">Python异常处理</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><script type="text/javascript">Fluid.utils.loadComments("#comments",(function(){var t=document.documentElement.getAttribute("data-user-color-scheme");t="dark"===t?"github-dark":"github-light",window.UtterancesThemeLight="github-light",window.UtterancesThemeDark="github-dark";var e=document.createElement("script");e.setAttribute("src","https://utteranc.es/client.js"),e.setAttribute("repo","suncle1993/suncle1993.github.io"),e.setAttribute("issue-term","pathname"),e.setAttribute("label","utterances"),e.setAttribute("theme",t),e.setAttribute("crossorigin","anonymous"),document.getElementById("comments").appendChild(e)}))</script><noscript>Please enable JavaScript to view the comments</noscript></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a></div><div class="statistics"><span id="busuanzi_container_site_pv" style="display:none">总访问量 <span id="busuanzi_value_site_pv"></span> 次 </span><span id="busuanzi_container_site_uv" style="display:none">总访客数 <span id="busuanzi_value_site_uv"></span> 人</span></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!1,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var o=jQuery("#board-ctn").offset().top;window.tocbot.init({tocSelector:"#toc-body",contentSelector:".markdown-body",headingSelector:CONFIG.toc.headingSelector||"h1,h2,h3,h4,h5,h6",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",collapseDepth:CONFIG.toc.collapseDepth||0,scrollSmooth:!0,headingsOffset:-o}),t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var o=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),n=[];for(var i of o)n.push(".markdown-body > "+i.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(n.join(", "))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>