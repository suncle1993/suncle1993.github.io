

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" href="/img/android-chrome-192x192.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Suncle Chen">
  <meta name="keywords" content="">
  
    <meta name="description" content="Python函数函数是Python里组织代码的最小单元，Python函数包含以下几个部分：  定义函数 调用函数 参数 函数的返回值 函数的嵌套 作用域 函数执行流程 递归函数 匿名函数 生成器 高阶函数">
<meta property="og:type" content="article">
<meta property="og:title" content="Python函数">
<meta property="og:url" content="http://example.com/2017/01/07/python%E5%87%BD%E6%95%B0/index.html">
<meta property="og:site_name" content="Suncle&#39;s Blog">
<meta property="og:description" content="Python函数函数是Python里组织代码的最小单元，Python函数包含以下几个部分：  定义函数 调用函数 参数 函数的返回值 函数的嵌套 作用域 函数执行流程 递归函数 匿名函数 生成器 高阶函数">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2017-01-07T14:08:51.000Z">
<meta property="article:modified_time" content="2022-08-25T03:41:39.049Z">
<meta property="article:author" content="Suncle Chen">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="函数">
<meta name="twitter:card" content="summary_large_image">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>Python函数 - Suncle&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.9.2","typing":{"enable":false,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":"41fc030db57d5570dd22f78997dc4a7e","google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml"};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="Suncle's Blog" type="application/atom+xml">
</head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 60vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Suncle&#39;s Blog</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-books"></i>
                更多
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/">
                    <i class="iconfont icon-category-fill"></i>
                    分类
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/tags/">
                    <i class="iconfont icon-tags-fill"></i>
                    标签
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/atom.xml">
                    <i class="iconfont icon-rss"></i>
                    RSS
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/suncle-banner.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle">Python函数</span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2017-01-07 22:08" pubdate>
          2017年1月7日 晚上
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          18k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          152 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="python"
        id="heading-23eeeb4347bdd26bfc6b7ee9a3b755dd" role="tab" data-toggle="collapse" href="#collapse-23eeeb4347bdd26bfc6b7ee9a3b755dd"
        aria-expanded="true"
      >
        python
        <span class="list-group-count">(32)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-23eeeb4347bdd26bfc6b7ee9a3b755dd"
           role="tabpanel" aria-labelledby="heading-23eeeb4347bdd26bfc6b7ee9a3b755dd">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2018/02/06/python-google-protocol-buffer/" title="Python Google Protocol Buffer"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python Google Protocol Buffer</span>
        </a>
      
    
      
      
        <a href="/2017/02/13/python-io/" title="Python IO"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python IO</span>
        </a>
      
    
      
      
        <a href="/2017/04/07/python-wsgi%E6%8E%A5%E5%8F%A3/" title="Python-WSGI接口"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python-WSGI接口</span>
        </a>
      
    
      
      
        <a href="/2017/04/14/python-pymysql/" title="Python-pymysql"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python-pymysql</span>
        </a>
      
    
      
      
        <a href="/2017/01/07/python%E5%87%BD%E6%95%B0/" title="Python函数"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">Python函数</span>
        </a>
      
    
      
      
        <a href="/2016/09/05/python%E5%87%BD%E6%95%B0%E5%AE%9A%E4%B9%89%E5%8F%8A%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3/" title="Python函数定义及参数详解"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python函数定义及参数详解</span>
        </a>
      
    
      
      
        <a href="/2017/11/14/python%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/" title="Python单元测试"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python单元测试</span>
        </a>
      
    
      
      
        <a href="/2016/09/02/python%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-list-tuple-dict-set/" title="Python基本数据类型-list-tuple-dict-set"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python基本数据类型-list-tuple-dict-set</span>
        </a>
      
    
      
      
        <a href="/2017/03/23/python%E5%A4%9A%E7%BA%BF%E7%A8%8B/" title="Python多线程"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python多线程</span>
        </a>
      
    
      
      
        <a href="/2016/08/30/python%E5%AD%97%E7%AC%A6%E4%B8%B2/" title="Python字符串"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python字符串</span>
        </a>
      
    
      
      
        <a href="/2017/05/22/python%E5%AE%9E%E7%8E%B0%E9%80%9A%E7%94%A8web%E6%A1%86%E6%9E%B6/" title="Python实现通用web框架"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python实现通用web框架</span>
        </a>
      
    
      
      
        <a href="/2018/03/12/python%E5%B8%B8%E7%94%A8%E6%A8%A1%E5%9D%97%E9%9B%86%E9%94%A6/" title="Python常用模块集锦"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python常用模块集锦</span>
        </a>
      
    
      
      
        <a href="/2017/03/05/python%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" title="Python异常处理"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python异常处理</span>
        </a>
      
    
      
      
        <a href="/2017/01/12/python%E6%8B%89%E9%93%BE%E6%B3%95%E5%92%8C%E5%BC%80%E5%9C%B0%E5%9D%80%E6%B3%95%E5%AE%9E%E7%8E%B0%E5%AD%97%E5%85%B8/" title="Python拉链法和开地址法实现字典"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python拉链法和开地址法实现字典</span>
        </a>
      
    
      
      
        <a href="/2017/03/16/python%E6%8F%8F%E8%BF%B0%E5%99%A8/" title="Python描述器"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python描述器</span>
        </a>
      
    
      
      
        <a href="/2017/09/07/python%E6%97%B6%E9%97%B4%E6%A8%A1%E5%9D%97%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E6%80%BB%E7%BB%93/" title="Python时间模块常用操作总结"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python时间模块常用操作总结</span>
        </a>
      
    
      
      
        <a href="/2016/12/04/python%E7%AD%94%E7%96%91%E8%A7%A3%E6%83%91/" title="Python答疑解惑"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python答疑解惑</span>
        </a>
      
    
      
      
        <a href="/2017/03/24/python%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" title="Python网络编程"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python网络编程</span>
        </a>
      
    
      
      
        <a href="/2017/02/15/python%E8%A3%85%E9%A5%B0%E5%99%A8/" title="Python装饰器"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python装饰器</span>
        </a>
      
    
      
      
        <a href="/2017/02/16/python%E8%A3%85%E9%A5%B0%E5%99%A8%E5%AE%9E%E7%8E%B0%E5%87%BD%E6%95%B0%E5%8A%A8%E6%80%81%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%9F%A5/" title="Python装饰器实现函数动态类型检查"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python装饰器实现函数动态类型检查</span>
        </a>
      
    
      
      
        <a href="/2016/12/23/python%E8%A7%A3%E6%9E%84%E4%B8%8E%E5%B0%81%E8%A3%85/" title="Python解构与封装"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python解构与封装</span>
        </a>
      
    
      
      
        <a href="/2017/01/11/python%E8%A7%A3%E6%9E%90%E5%BC%8F/" title="Python解析式"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python解析式</span>
        </a>
      
    
      
      
        <a href="/2017/03/08/python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E5%9F%BA%E7%A1%80/" title="Python面向对象基础"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python面向对象基础</span>
        </a>
      
    
      
      
        <a href="/2017/03/15/python%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%AD%94%E6%9C%AF%E6%96%B9%E6%B3%95/" title="Python面向对象的魔术方法"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python面向对象的魔术方法</span>
        </a>
      
    
      
      
        <a href="/2017/05/10/sqlalchemy%E4%BD%BF%E7%94%A8/" title="SQLAlchemy使用"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">SQLAlchemy使用</span>
        </a>
      
    
      
      
        <a href="/2016/12/13/%E3%80%90%E5%A1%AB%E5%9D%91%E7%B3%BB%E5%88%97%E3%80%91python%E4%B9%A0%E9%A2%98%E9%9B%86/" title="【填坑系列】Python习题集"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">【填坑系列】Python习题集</span>
        </a>
      
    
      
      
        <a href="/2016/12/04/%E3%80%90%E5%A1%AB%E5%9D%91%E7%B3%BB%E5%88%97%E3%80%91python%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%80%BB%E7%9B%AE%E5%BD%95/" title="【填坑系列】Python基础知识总目录"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">【填坑系列】Python基础知识总目录</span>
        </a>
      
    
      
      
        <a href="/2017/10/31/%E4%BB%8Epython%E8%B0%83%E7%94%A8%E5%A0%86%E6%A0%88%E8%8E%B7%E5%8F%96%E8%A1%8C%E5%8F%B7%E7%AD%89%E4%BF%A1%E6%81%AF/" title="从Python调用堆栈获取行号等信息"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">从Python调用堆栈获取行号等信息</span>
        </a>
      
    
      
      
        <a href="/2018/03/22/%E4%BD%BF%E7%94%A8google%E7%BF%BB%E8%AF%91api/" title="使用Google翻译Api"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">使用Google翻译Api</span>
        </a>
      
    
      
      
        <a href="/2018/04/10/%E5%BE%AE%E5%8D%9A%E7%88%AC%E5%8F%96%E7%83%AD%E6%90%9C%E6%A6%9C%E5%92%8C%E7%83%AD%E9%97%A8%E8%AF%9D%E9%A2%98/" title="微博爬取热搜榜和热门话题"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">微博爬取热搜榜和热门话题</span>
        </a>
      
    
      
      
        <a href="/2017/08/16/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E5%9F%BA%E4%BA%8Eflask%E7%9A%84%E9%AB%98%E5%B9%B6%E5%8F%91%E9%AB%98%E5%8F%AF%E7%94%A8%E7%9A%84%E6%9F%A5%E8%AF%A2ip%E7%9A%84http%E6%9C%8D%E5%8A%A1/" title="设计一个基于flask的高并发高可用的查询ip的http服务"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">设计一个基于flask的高并发高可用的查询ip的http服务</span>
        </a>
      
    
      
      
        <a href="/2017/09/25/%E8%AF%A6%E8%A7%A3supervisor%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" title="详解supervisor进程管理"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">详解supervisor进程管理</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Python函数</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="Python函数"><a href="#Python函数" class="headerlink" title="Python函数"></a>Python函数</h1><p>函数是Python里组织代码的最小单元，Python函数包含以下几个部分：</p>
<ul>
<li>定义函数</li>
<li>调用函数</li>
<li>参数</li>
<li>函数的返回值</li>
<li>函数的嵌套</li>
<li>作用域</li>
<li>函数执行流程</li>
<li>递归函数</li>
<li>匿名函数</li>
<li>生成器</li>
<li>高阶函数</li>
</ul>
<span id="more"></span>

<h2 id="定义函数"><a href="#定义函数" class="headerlink" title="定义函数"></a>定义函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):     <span class="hljs-comment"># 函数定义 def 表示定义一个函数， 紧接着是函数名 函数名后面用一对小括号列出参数列表，参数列表后面使用一个冒号开始函数体</span><br>    <span class="hljs-built_in">print</span>(x + y)   <span class="hljs-comment"># 函数体是正常的Python语句，可以包含任意结构</span><br>    <span class="hljs-keyword">return</span>  x + y  <span class="hljs-comment"># return 语句表示函数的返回值</span><br></code></pre></td></tr></table></figure>

<p>函数是有输入(参数)和输出(返回值)的代码单元， 把输入转化为输出</p>
<h2 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h2><p>定义函数的时候,并不会执行函数体，　当调用函数的时候，才会执行其中的语句块</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):     <span class="hljs-comment"># 函数定义 def 表示定义一个函数， 紧接着是函数名 函数名后面用一对小括号</span><br>   ...:         <span class="hljs-built_in">print</span>(x + y)   <span class="hljs-comment"># 函数体是正常的Python语句，可以包含任意结构</span><br>   ...:         <span class="hljs-keyword">return</span>  x + y  <span class="hljs-comment"># return 语句表示函数的返回值</span><br>   ...: <br><br>In [<span class="hljs-number">2</span>]: add(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>) <span class="hljs-comment"># 函数使用函数名来调用，函数名后紧跟一对小括号，小括号里传入函数定义时的参数</span><br><span class="hljs-number">8</span><br>Out[<span class="hljs-number">2</span>]: <span class="hljs-number">8</span><br><br>In [<span class="hljs-number">3</span>]: add(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>) <span class="hljs-comment"># 传入参数必须和函数定义时的参数相匹配，如果不匹配，会抛出TypeError</span><br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">3</span>-a11d83d1db7e&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> add(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<br><br>TypeError: add() takes <span class="hljs-number">2</span> positional arguments but <span class="hljs-number">3</span> were given<br></code></pre></td></tr></table></figure>

<h2 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h2><h3 id="传参方式"><a href="#传参方式" class="headerlink" title="传参方式"></a>传参方式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">5</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>   ...:     ret = x + y<br>   ...:     <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#123;&#125; + &#123;&#125; = &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(x, y, x+y))<br>   ...:     <span class="hljs-keyword">return</span> ret<br>   ...: <br><br>In [<span class="hljs-number">6</span>]: add(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>) <span class="hljs-comment">#参数按照定义的顺序传入，这样的传参方法叫做位置参数</span><br><span class="hljs-number">3</span> + <span class="hljs-number">5</span> = <span class="hljs-number">8</span><br>Out[<span class="hljs-number">6</span>]: <span class="hljs-number">8</span><br><br>In [<span class="hljs-number">7</span>]: add(y=<span class="hljs-number">3</span>, x=<span class="hljs-number">5</span>) <span class="hljs-comment">#参数按照定义时的变量名传递，这样的传参方法叫做关键字参数，关键字参数和顺序无关</span><br><span class="hljs-number">5</span> + <span class="hljs-number">3</span> = <span class="hljs-number">8</span><br>Out[<span class="hljs-number">7</span>]: <span class="hljs-number">8</span><br><br>In [<span class="hljs-number">8</span>]: add(<span class="hljs-number">5</span>, y=<span class="hljs-number">3</span>) <span class="hljs-comment"># 位置参数和关键字参数可以混用</span><br><span class="hljs-number">5</span> + <span class="hljs-number">3</span> = <span class="hljs-number">8</span><br>Out[<span class="hljs-number">8</span>]: <span class="hljs-number">8</span><br><br>In [<span class="hljs-number">9</span>]: add(x=<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)	<span class="hljs-comment"># 位置参数不能放在关键字参数的后面</span><br>  File <span class="hljs-string">&quot;&lt;ipython-input-9-165b39de39ac&gt;&quot;</span>, line <span class="hljs-number">1</span><br>    add(x=<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)<br>            ^<br>SyntaxError: positional argument follows keyword argument<br><br><br>In [<span class="hljs-number">10</span>]: add(<span class="hljs-string">&#x27;3&#x27;</span>, <span class="hljs-string">&#x27;5&#x27;</span>)	<span class="hljs-comment"># python是动态语言，传入的参数类型可以不固定</span><br><span class="hljs-number">3</span> + <span class="hljs-number">5</span> = <span class="hljs-number">35</span><br>Out[<span class="hljs-number">10</span>]: <span class="hljs-string">&#x27;35&#x27;</span><br><br>In [<span class="hljs-number">11</span>]: add(<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;5&#x27;</span>) <span class="hljs-comment"># python是强类型语言，传入的参数需要满足强类型要求，否则会抛出TypeError</span><br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">11</span>-335767c130e1&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> add(<span class="hljs-number">3</span>, <span class="hljs-string">&#x27;5&#x27;</span>)<br><br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">5</span>-e720706d1634&gt; <span class="hljs-keyword">in</span> add(x, y)<br>      <span class="hljs-number">1</span> <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>----&gt; <span class="hljs-number">2</span>     ret = x + y<br>      <span class="hljs-number">3</span>     <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#123;&#125; + &#123;&#125; = &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(x, y, x+y))<br>      <span class="hljs-number">4</span>     <span class="hljs-keyword">return</span> ret<br><br>TypeError: unsupported operand <span class="hljs-built_in">type</span>(s) <span class="hljs-keyword">for</span> +: <span class="hljs-string">&#x27;int&#x27;</span> <span class="hljs-keyword">and</span> <span class="hljs-string">&#x27;str&#x27;</span><br><br></code></pre></td></tr></table></figure>

<h3 id="参数默认值"><a href="#参数默认值" class="headerlink" title="参数默认值"></a>参数默认值</h3><p>参数可以有默认值，当一个参数有默认值时， 调用时如果不传递此参数，会使用默认值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">12</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>(<span class="hljs-params">x, y=<span class="hljs-number">1</span></span>):	<span class="hljs-comment"># 参数y默认为1</span><br>    ...:     x += y<br>    ...:     <span class="hljs-keyword">return</span> x<br>    ...: <br><br>In [<span class="hljs-number">13</span>]: inc(<span class="hljs-number">3</span>)	<span class="hljs-comment"># 传参时只需要传入x即可</span><br>Out[<span class="hljs-number">13</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">14</span>]: inc(<span class="hljs-number">3</span>, <span class="hljs-number">2</span>)<br>Out[<span class="hljs-number">14</span>]: <span class="hljs-number">5</span><br><br>In [<span class="hljs-number">15</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>(<span class="hljs-params">x=<span class="hljs-number">1</span>, y</span>):	<span class="hljs-comment"># 默认参数不能再非默认参数之前</span><br>    ...:     <span class="hljs-keyword">return</span> x + y<br>  File <span class="hljs-string">&quot;&lt;ipython-input-15-993be842d592&gt;&quot;</span>, line <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>(<span class="hljs-params">x=<span class="hljs-number">1</span>, y</span>):<br>           ^<br>SyntaxError: non-default argument follows default argument<br><br><br>In [<span class="hljs-number">16</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">host=<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>, port=<span class="hljs-number">3306</span>, user=<span class="hljs-string">&#x27;root&#x27;</span>, password=<span class="hljs-string">&#x27;&#x27;</span>, dbname=<span class="hljs-string">&#x27;test&#x27;</span></span>):<br>    ...:     <span class="hljs-keyword">pass</span><br>    ...: <br><br>In [<span class="hljs-number">17</span>]: connect(<span class="hljs-string">&#x27;192.168.110.13&#x27;</span>,password=<span class="hljs-string">&#x27;123456&#x27;</span>)<br></code></pre></td></tr></table></figure>

<p>参数默认值和关键字参数一起使用，会让代码非常简洁</p>
<h3 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h3><p>可变参数两种形式：</p>
<ul>
<li>位置可变参数 ： 参数名前加<strong>一个</strong>星号， 构成<strong>元组</strong>， 传参只能以<strong>位置参数</strong>的形式</li>
<li>关键字可变参数： 参数名前加<strong>两个</strong>信号， 构成<strong>字典</strong>， 传参只能以<strong>关键字参数</strong>的形式</li>
</ul>
<p><strong>位置可变参数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">18</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">*lst</span>):<br>    ...:     <span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(lst))<br>    ...:     ret = <span class="hljs-number">0</span><br>    ...:     <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> lst:<br>    ...:         ret += x<br>    ...:     <span class="hljs-keyword">return</span> ret<br>    ...: <br><span class="hljs-comment"># 参数前加一个星号， 表示这个参数是可变的， 也就是可以接受任意多个参数, 这些参数将构成一个元组， 此时只能通过位置参数传参</span><br>In [<span class="hljs-number">19</span>]: <span class="hljs-built_in">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;tuple&#x27;</span>&gt;<br>Out[<span class="hljs-number">19</span>]: <span class="hljs-number">6</span><br><br></code></pre></td></tr></table></figure>

<p><strong>关键字可变参数</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">20</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">connect</span>(<span class="hljs-params">**kwargs</span>):<br>    ...:     <span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(kwargs))<br>    ...:     <span class="hljs-keyword">for</span> k, v <span class="hljs-keyword">in</span> kwargs.items():<br>    ...:         <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#123;&#125; =&gt; &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(k, v))<br>    ...:         <br><span class="hljs-comment"># 参数前加两个星号， 表示这个参数是可变的，可以接受任意多个参数， 这些参数构成一个字典，此时只能通过关键字参数传参</span><br>In [<span class="hljs-number">21</span>]: connect(host=<span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,port=<span class="hljs-number">3306</span>)<br>&lt;<span class="hljs-keyword">class</span> <span class="hljs-string">&#x27;dict&#x27;</span>&gt;<br>host =&gt; <span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span><br>port =&gt; <span class="hljs-number">3306</span><br></code></pre></td></tr></table></figure>

<p><strong>位置可变参数和关键字可变参数混合使用</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">22</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">*args, **kwargs</span>):<br>    ...:         <span class="hljs-built_in">print</span>(args)<br>    ...:         <span class="hljs-built_in">print</span>(kwargs)<br>    ...:     <br><br>In [<span class="hljs-number">23</span>]: fn(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, a=<span class="hljs-number">4</span>, b=<span class="hljs-number">5</span>)<br>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br>&#123;<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">5</span>&#125;<br><span class="hljs-comment"># 以上说明位置可变参数和关键字可变参数可以混合使用</span><br><br>In [<span class="hljs-number">24</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">**kwargs, *args</span>): <br>  File <span class="hljs-string">&quot;&lt;ipython-input-24-e42478d184b2&gt;&quot;</span>, line <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">**kwargs, *args</span>):<br>                   ^<br>SyntaxError: invalid syntax<br><span class="hljs-comment"># 以上说明当位置可变参数和关键字可变参数一起使用时， 位置可变参数必须在前面</span><br></code></pre></td></tr></table></figure>

<p><strong>可变参数和普通参数混合使用</strong></p>
<p>普通参数可以和可变参数一起使用，但是传参的时候必须匹配，演示如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">25</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">x, y, *args, **kwargs</span>):<br>    ...:         <span class="hljs-built_in">print</span>(x)<br>    ...:         <span class="hljs-built_in">print</span>(y)<br>    ...:         <span class="hljs-built_in">print</span>(args)<br>    ...:         <span class="hljs-built_in">print</span>(kwargs)<br>    ...:     <br><br>In [<span class="hljs-number">26</span>]: fn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, a=<span class="hljs-number">1</span>, b=<span class="hljs-number">2</span>)<br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br>(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>)<br>&#123;<span class="hljs-string">&#x27;a&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;b&#x27;</span>: <span class="hljs-number">2</span>&#125;<br><br>In [<span class="hljs-number">27</span>]: fn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br>()<br>&#123;&#125;<br><br>In [<span class="hljs-number">28</span>]: fn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, x=<span class="hljs-number">1</span>)	<span class="hljs-comment"># x有两个值，一个2，一个1，所以抛出TypeError</span><br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">28</span>-0f8d856dee50&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> fn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, x=<span class="hljs-number">1</span>)<br><br>TypeError: fn() got multiple values <span class="hljs-keyword">for</span> argument <span class="hljs-string">&#x27;x&#x27;</span><br><br>In [<span class="hljs-number">29</span>]: fn(<span class="hljs-number">2</span>, y=<span class="hljs-number">3</span>)<br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br>()<br>&#123;&#125;<br></code></pre></td></tr></table></figure>

<p>位置可变参数可以在普通参数之前， 但是在位置可变参数之后的普通参数变成了<strong>keyword-only</strong>参数:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">30</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">*args, x</span>):<br>    ...:     <span class="hljs-built_in">print</span>(args)<br>    ...:     <span class="hljs-built_in">print</span>(x)<br>    ...:     <br><br>In [<span class="hljs-number">31</span>]: fn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">31</span>-fab2f7df0315&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> fn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>)<br><br>TypeError: fn() missing <span class="hljs-number">1</span> required keyword-only argument: <span class="hljs-string">&#x27;x&#x27;</span><br><br>In [<span class="hljs-number">32</span>]: fn(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, x=<span class="hljs-number">4</span>)	<span class="hljs-comment"># 必须将位置可变参数之后的普通参数变成keyword-only，否则TypeError</span><br>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)<br><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>

<p>关键字可变参数不允许在普通参数之前,演示如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">33</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">**kwargs, x=<span class="hljs-number">5</span></span>):<br>  File <span class="hljs-string">&quot;&lt;ipython-input-33-889f99c1c889&gt;&quot;</span>, line <span class="hljs-number">1</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">**kwargs, x=<span class="hljs-number">5</span></span>):<br>                   ^<br>SyntaxError: invalid syntax<br></code></pre></td></tr></table></figure>

<p>关于默认参数和可变参数的总结：</p>
<p><strong>通常</strong>来说：</p>
<ul>
<li>默认参数靠后</li>
<li>可变参数靠后</li>
<li>默认参数和可变参数一般不同时出现</li>
<li>当默认参数和可变参数一起出现的时候， 默认参数相当于普通参数</li>
</ul>
<h3 id="参数解构"><a href="#参数解构" class="headerlink" title="参数解构"></a>参数解构</h3><p>参数解构有两种形式</p>
<ul>
<li><strong>一个星号</strong> 解构的对象：可迭代对象 ，解构的结果：位置参数</li>
<li><strong>两个星号</strong> 解构的对象：字典 ，解构的结果：关键字参数</li>
</ul>
<p><strong>一个星号的情况</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">34</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x, y</span>):<br>    ...:         ret = x + y<br>    ...:         <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;&#123;&#125; + &#123;&#125; = &#123;&#125;&#x27;</span>.<span class="hljs-built_in">format</span>(x, y, ret))<br>    ...:         <span class="hljs-keyword">return</span> ret<br>    ...: <br><br>In [<span class="hljs-number">35</span>]: add(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><span class="hljs-number">1</span> + <span class="hljs-number">2</span> = <span class="hljs-number">3</span><br>Out[<span class="hljs-number">35</span>]: <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">36</span>]: add(x=<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>)<br><span class="hljs-number">1</span> + <span class="hljs-number">2</span> = <span class="hljs-number">3</span><br>Out[<span class="hljs-number">36</span>]: <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">37</span>]: t = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>]<br><br>In [<span class="hljs-number">38</span>]: add(t[<span class="hljs-number">0</span>], t[<span class="hljs-number">1</span>])	<span class="hljs-comment"># 如果列表中的元素很多的时候，一个一个解开很不方便简洁</span><br><span class="hljs-number">1</span> + <span class="hljs-number">2</span> = <span class="hljs-number">3</span><br>Out[<span class="hljs-number">38</span>]: <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">39</span>]: add(*t)	<span class="hljs-comment"># 位置参数解构  加一个星号， 可以把可迭代对象解构成位置参数</span><br><span class="hljs-number">1</span> + <span class="hljs-number">2</span> = <span class="hljs-number">3</span><br>Out[<span class="hljs-number">39</span>]: <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">40</span>]: add(*<span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>))<br><span class="hljs-number">0</span> + <span class="hljs-number">1</span> = <span class="hljs-number">1</span><br>Out[<span class="hljs-number">40</span>]: <span class="hljs-number">1</span><br></code></pre></td></tr></table></figure>

<p><strong>二个星号</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">42</span>]: d = &#123;<span class="hljs-string">&#x27;x&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;y&#x27;</span>:<span class="hljs-number">2</span>&#125;<br><br>In [<span class="hljs-number">43</span>]: add(**d)<br><span class="hljs-number">1</span> + <span class="hljs-number">2</span> = <span class="hljs-number">3</span><br>Out[<span class="hljs-number">43</span>]: <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<p><strong>参数解构发生在函数调用时， 可变参数发生函数定义时，所以两者并不冲突</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">46</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">sum</span>(<span class="hljs-params">*args</span>):	<span class="hljs-comment"># 可变参数发生在函数定义时</span><br>    ...:     ret = <span class="hljs-number">0</span><br>    ...:     <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> args:<br>    ...:         ret += x<br>    ...:     <span class="hljs-keyword">return</span> ret<br>    ...: <br><br>In [<span class="hljs-number">47</span>]: <span class="hljs-built_in">sum</span>(*<span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))	<span class="hljs-comment"># 参数解构发生在函数调用时</span><br>Out[<span class="hljs-number">47</span>]: <span class="hljs-number">45</span><br><br>In [<span class="hljs-number">48</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">**kwargs</span>):<br>    ...:     <span class="hljs-built_in">print</span>(kwargs)<br>    ...:     <br><br>In [<span class="hljs-number">49</span>]: fn(**&#123;<span class="hljs-string">&#x27;a-b&#x27;</span>:<span class="hljs-number">1</span>&#125;)<br>&#123;<span class="hljs-string">&#x27;a-b&#x27;</span>: <span class="hljs-number">1</span>&#125;<br><br>In [<span class="hljs-number">50</span>]: fn(**&#123;<span class="hljs-number">123</span>:<span class="hljs-number">1</span>&#125;)	<span class="hljs-comment"># 关键字参数解构， key必须是str</span><br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">50</span>-3c8b8b3fdf0b&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> fn(**&#123;<span class="hljs-number">123</span>:<span class="hljs-number">1</span>&#125;)<br><br>TypeError: fn() keywords must be strings<br></code></pre></td></tr></table></figure>

<h3 id="keyword-only-参数"><a href="#keyword-only-参数" class="headerlink" title="keyword-only 参数"></a>keyword-only 参数</h3><p>使用方法参见：<a target="_blank" rel="noopener" href="https://www.polarxiong.com/archives/Python-%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E5%88%97%E8%A1%A8%E4%B8%AD%E5%8D%95%E4%B8%AA%E6%98%9F%E5%8F%B7%E7%9A%84%E6%84%8F%E6%80%9D-Keyword-Only-Arguments.html">Python: 函数参数列表中单个星号的意思，Keyword-Only Arguments</a></p>
<p>星号可以以一个参数的形式出现在函数声明中的参数列表中，但星号之后的所有参数都必须有关键字（keyword），这样在函数调用时，星号*之后的所有参数都必须以<code>keyword=value</code>的形式调用，而不能以位置顺序调用。</p>
<p>使用示例如下：也可参考上面链接中的示例</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">54</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">*, x</span>):<br>    ...:     <span class="hljs-built_in">print</span>(x)<br>    ...:     <br><br>In [<span class="hljs-number">55</span>]: fn(<span class="hljs-number">3</span>)<br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">55</span>-f005f2a6106f&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> fn(<span class="hljs-number">3</span>)<br><br>TypeError: fn() takes <span class="hljs-number">0</span> positional arguments but <span class="hljs-number">1</span> was given<br><br>In [<span class="hljs-number">56</span>]: fn(x=<span class="hljs-number">3</span>)<br><span class="hljs-number">3</span><br><br>In [<span class="hljs-number">57</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">x, *, y</span>):<br>    ...:     <span class="hljs-built_in">print</span>(x)<br>    ...:     <span class="hljs-built_in">print</span>(y)<br>    ...:     <br><br>In [<span class="hljs-number">58</span>]: fn(<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>)<br><span class="hljs-number">1</span><br><span class="hljs-number">2</span><br><br>In [<span class="hljs-number">59</span>]: fn(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br>---------------------------------------------------------------------------<br>TypeError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">59</span>-c159019d3516&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> fn(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><br>TypeError: fn() takes <span class="hljs-number">1</span> positional argument but <span class="hljs-number">2</span> were given<br></code></pre></td></tr></table></figure>

<h2 id="函数的返回值"><a href="#函数的返回值" class="headerlink" title="函数的返回值"></a>函数的返回值</h2><ul>
<li>return 语句除了返回值之外，还会结束函数， return之后的语句将不会被执行</li>
<li>一个函数可以有多个return语句， 执行到哪个return由哪个return返回结果并结束函数</li>
<li>函数中 return可以提前结束循环</li>
<li>当函数没有return语句的时候，返回None</li>
<li>当函数需要返回多个值时， 可以用封装把返回值封装成一个元组</li>
<li>可以通过解构获取到多返回值</li>
<li>return None 可以简写为 return， 通常用于结束函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">63</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">x</span>):<br>    ...:     <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(x):<br>    ...:         <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">3</span>:<br>    ...:             <span class="hljs-keyword">return</span> i	<span class="hljs-comment"># return可以提前退出循环</span><br>    ...:     <span class="hljs-keyword">else</span>:<br>    ...:         <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;not bigger than 3&#x27;</span>)<br>    ...:         <br><br>In [<span class="hljs-number">64</span>]: fn(<span class="hljs-number">2</span>)<br><span class="hljs-keyword">not</span> bigger than <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">65</span>]: fn(<span class="hljs-number">10</span>)	<br>Out[<span class="hljs-number">65</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">66</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():<br>    ...:     <span class="hljs-keyword">pass</span>	<span class="hljs-comment"># 没有return时返回的是None</span><br>    ...: <br><br>In [<span class="hljs-number">67</span>]: ret = fn()<br><br>In [<span class="hljs-number">68</span>]: ret<br><br>In [<span class="hljs-number">69</span>]: <span class="hljs-built_in">type</span>(ret)<br>Out[<span class="hljs-number">69</span>]: NoneType<br><br>In [<span class="hljs-number">70</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():<br>    ...:     <span class="hljs-keyword">return</span> <span class="hljs-number">3</span>, <span class="hljs-number">5</span>	<span class="hljs-comment"># 当函数需要返回多个值时， 会把返回值封装成一个元组</span><br>    ...: <br><br>In [<span class="hljs-number">71</span>]: ret = fn()<br><br>In [<span class="hljs-number">72</span>]: <span class="hljs-built_in">type</span>(ret)<br>Out[<span class="hljs-number">72</span>]: <span class="hljs-built_in">tuple</span><br><br>In [<span class="hljs-number">73</span>]: x, y = fn()	<span class="hljs-comment"># 可以通过解构获取多个返回值</span><br></code></pre></td></tr></table></figure>

<h2 id="函数的嵌套"><a href="#函数的嵌套" class="headerlink" title="函数的嵌套"></a>函数的嵌套</h2><p>函数可以嵌套使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">75</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">outter</span>():<br>    ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>    ...:         <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;inner&#x27;</span>)<br>    ...:     <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;outter&#x27;</span>)<br>    ...:     inner()<br>    ...:     <br><br>In [<span class="hljs-number">76</span>]: outter()<br>outter<br>inner<br></code></pre></td></tr></table></figure>

<h2 id="作用域"><a href="#作用域" class="headerlink" title="作用域"></a>作用域</h2><h3 id="变量的作用域为定义此变量的作用域"><a href="#变量的作用域为定义此变量的作用域" class="headerlink" title="变量的作用域为定义此变量的作用域"></a>变量的作用域为定义此变量的作用域</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">6</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(): <span class="hljs-comment"># 变量的作用域为定义此变量的作用域</span><br>   ...:         xx = <span class="hljs-number">1</span><br>   ...:         <span class="hljs-built_in">print</span>(xx)<br>   ...:     <br><br>In [<span class="hljs-number">7</span>]: fn()<br><span class="hljs-number">1</span><br><br>In [<span class="hljs-number">8</span>]: xx<br>---------------------------------------------------------------------------<br>NameError                                 Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">8</span>-102f5037fe64&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> xx<br><br>NameError: name <span class="hljs-string">&#x27;xx&#x27;</span> <span class="hljs-keyword">is</span> <span class="hljs-keyword">not</span> defined<br></code></pre></td></tr></table></figure>

<p>表明变量的作用域就在fn函数之中</p>
<h3 id="上级作用域对下级作用域只读可见"><a href="#上级作用域对下级作用域只读可见" class="headerlink" title="上级作用域对下级作用域只读可见"></a>上级作用域对下级作用域只读可见</h3><p>不同作用域变量不可见， 但是下级作用域可以对上级作用域的变量只读可见</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">9</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():	<span class="hljs-comment"># 上级作用域对下级作用域可见</span><br>   ...:     xx = <span class="hljs-number">1</span><br>   ...:     <span class="hljs-built_in">print</span>(xx)<br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>   ...:         <span class="hljs-built_in">print</span>(xx)<br>   ...:     inner()<br>   ...:     <br><br>In [<span class="hljs-number">10</span>]: fn()<br><span class="hljs-number">1</span><br><span class="hljs-number">1</span><br><br>In [<span class="hljs-number">11</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():	<span class="hljs-comment"># 上级作用域对下级作用域只读可见</span><br>    ...:     xx = <span class="hljs-number">1</span><br>    ...:     <span class="hljs-built_in">print</span>(xx)<br>    ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">inner</span>():<br>    ...:         xx = <span class="hljs-number">2</span><br>    ...:     inner()<br>    ...:     <span class="hljs-built_in">print</span>(xx)<br>    ...:     <br><br>In [<span class="hljs-number">12</span>]: fn()<br><span class="hljs-number">1</span><br><span class="hljs-number">1</span>	<span class="hljs-comment"># 可以发现xx并没有被下级作用域修改</span><br></code></pre></td></tr></table></figure>

<h3 id="不要使用全局变量global"><a href="#不要使用全局变量global" class="headerlink" title="不要使用全局变量global"></a>不要使用全局变量global</h3><p><strong>除非你清楚的知道global会带来什么，并且明确的知道，非global不行， 否则不要使用global</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">13</span>]: xx = <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">14</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():<br>    ...:     <span class="hljs-keyword">global</span> xx	<span class="hljs-comment"># global 可以提升变量作用域为全局变量</span><br>    ...:     xx += <span class="hljs-number">1</span><br>    ...:     <br><br>In [<span class="hljs-number">15</span>]: fn()<br><br>In [<span class="hljs-number">16</span>]: xx<br>Out[<span class="hljs-number">16</span>]: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<h3 id="闭包函数"><a href="#闭包函数" class="headerlink" title="闭包函数"></a>闭包函数</h3><p><strong>闭包定义（Wikipedia）</strong>：在一些语言中，在函数中可以（嵌套）定义另一个函数时，如果内部的函数引用了外部的函数的变量，则可能产生闭包。闭包可以用来在一个函数与一组“私有”变量之间创建关联关系。在给定函数被多次调用的过程中，这些私有变量能够保持其持久性</p>
<p><strong>通俗理解</strong>：当某个函数被当成对象返回时，<strong>夹带了外部变量</strong>，就形成了一个闭包。</p>
<p>如果我们想实现一个无限增长的计数器，可以写一个counter函数，函数内部进行自增就行。假定我们按照以下写法：就会报错</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">17</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>(): <br>    ...:     c = <span class="hljs-number">0</span><br>    ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>    ...:         c += <span class="hljs-number">1</span> <span class="hljs-comment"># c[0] = c[0] + 1</span><br>    ...:         <span class="hljs-keyword">return</span> c<br>    ...: <span class="hljs-keyword">return</span> inc<br>    ...: <br><br>In [<span class="hljs-number">18</span>]: f = counter()<br><br>In [<span class="hljs-number">19</span>]: f()<br>---------------------------------------------------------------------------<br>UnboundLocalError                         Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">19</span>-0ec059b9bfe1&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> f()<br><br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">17</span>-9dd4cd4942f6&gt; <span class="hljs-keyword">in</span> inc()<br>      <span class="hljs-number">2</span>     c = <span class="hljs-number">0</span><br>      <span class="hljs-number">3</span>     <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>----&gt; <span class="hljs-number">4</span>         c += <span class="hljs-number">1</span> <span class="hljs-comment"># c[0] = c[0] + 1</span><br>      <span class="hljs-number">5</span>         <span class="hljs-keyword">return</span> c<br>      <span class="hljs-number">6</span>     <span class="hljs-keyword">return</span> inc<br><br>UnboundLocalError: local variable <span class="hljs-string">&#x27;c&#x27;</span> referenced before assignment<br></code></pre></td></tr></table></figure>

<p>在 python 的函数内，可以直接引用外部变量，但不能改写外部变量，因此如果在闭包中直接改写父函数的变量，就会发生错误。比如上述程序直接改写父函数中的变量<code>c</code></p>
<p>python的闭包中如果想改写父函数的变量可以用可变容器实现，这也是python2实现的唯一方式</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>():<br>   ...:     c=[<span class="hljs-number">0</span>]<br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>   ...:         c[<span class="hljs-number">0</span>] += <span class="hljs-number">1</span><br>   ...:         <span class="hljs-keyword">return</span> c[<span class="hljs-number">0</span>]<br>   ...:     <span class="hljs-keyword">return</span> inc<br>   ...: <br><br>In [<span class="hljs-number">2</span>]: f = counter()<br><br>In [<span class="hljs-number">3</span>]: f<br>Out[<span class="hljs-number">3</span>]: &lt;function __main__.counter.&lt;<span class="hljs-built_in">locals</span>&gt;.inc&gt;<br><br>In [<span class="hljs-number">4</span>]: f()<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">5</span>]: f()<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">2</span><br><br>In [<span class="hljs-number">6</span>]: f()<br>Out[<span class="hljs-number">6</span>]: <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<h3 id="nonlocal关键字"><a href="#nonlocal关键字" class="headerlink" title="nonlocal关键字"></a>nonlocal关键字</h3><p>在python3中改写父变量还有一种方就是使用**<code>nonlocal</code>关键字**</p>
<p>nonlocal 关键字用于标记一个变量由他的上级作用域定义， 通过nonlocal标记的变量， 可读可写</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">7</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>():<br>   ...:     c = <span class="hljs-number">0</span><br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>():<br>   ...:         <span class="hljs-keyword">nonlocal</span> c<br>   ...:         c += <span class="hljs-number">1</span><br>   ...:         <span class="hljs-keyword">return</span> c<br>   ...:     <span class="hljs-keyword">return</span> inc<br>   ...: <br><br>In [<span class="hljs-number">8</span>]: f = counter()<br><br>In [<span class="hljs-number">9</span>]: f<br>Out[<span class="hljs-number">9</span>]: &lt;function __main__.counter.&lt;<span class="hljs-built_in">locals</span>&gt;.inc&gt;<br><br>In [<span class="hljs-number">10</span>]: f()<br>Out[<span class="hljs-number">10</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">11</span>]: f()<br>Out[<span class="hljs-number">11</span>]: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<p>如果上级没有定义nonlocal的变量，使用nonlocal时会抛出语法错误</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">12</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>():<br>    ...:     <span class="hljs-keyword">nonlocal</span> xxx<br>  File <span class="hljs-string">&quot;&lt;ipython-input-12-2d2b8104e945&gt;&quot;</span>, line <span class="hljs-number">2</span><br>    <span class="hljs-keyword">nonlocal</span> xxx<br>SyntaxError: no binding <span class="hljs-keyword">for</span> <span class="hljs-keyword">nonlocal</span> <span class="hljs-string">&#x27;xxx&#x27;</span> found<br></code></pre></td></tr></table></figure>

<h3 id="函数的-defaults-属性"><a href="#函数的-defaults-属性" class="headerlink" title="函数的__defaults__属性"></a>函数的<code>__defaults__</code>属性</h3><p>可变参数和不可变参数的<code>__defaults__</code>属性不一样</p>
<p><strong>参数可变时</strong></p>
<p>当使用可变类型作为默认值参数默认值时，需要特别注意，会改变函数的<code>__default__</code>属性</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">xxyy=[]</span>):<br>   ...:     xxyy.append(<span class="hljs-number">1</span>)<br>   ...:     <span class="hljs-built_in">print</span>(xxyy)<br>   ...:     <br><br>In [<span class="hljs-number">2</span>]: fn()<br>[<span class="hljs-number">1</span>]<br><br>In [<span class="hljs-number">3</span>]: fn()<br>[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>]<br><br>In [<span class="hljs-number">4</span>]: fn.__defaults__		<span class="hljs-comment"># 参数是函数对象的属性</span><br>Out[<span class="hljs-number">4</span>]: ([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>],)<br><br>In [<span class="hljs-number">5</span>]: fn()<br>[<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]<br><br>In [<span class="hljs-number">6</span>]: fn.__defaults__ 	<span class="hljs-comment"># 所有的函数参数封装成一个元组，第一个函数参数时列表在动态变化</span><br>Out[<span class="hljs-number">6</span>]: ([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>],)<br></code></pre></td></tr></table></figure>

<p><strong>参数不可变时</strong></p>
<p>使用不可变类型作为默认值，函数体内不改变默认值</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">8</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">x=<span class="hljs-number">0</span>, y=<span class="hljs-number">0</span></span>):<br>   ...:         x = <span class="hljs-number">3</span>   <span class="hljs-comment"># 赋值即定义</span><br>   ...:         y = <span class="hljs-number">3</span>   <span class="hljs-comment"># 赋值即定义</span><br>   ...:     <br><br>In [<span class="hljs-number">9</span>]: fn.__defaults__<br>Out[<span class="hljs-number">9</span>]: (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br><br>In [<span class="hljs-number">10</span>]: fn()<br><br>In [<span class="hljs-number">11</span>]: fn.__defaults__<br>Out[<span class="hljs-number">11</span>]: (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<br></code></pre></td></tr></table></figure>

<h3 id="可变参数时None的使用"><a href="#可变参数时None的使用" class="headerlink" title="可变参数时None的使用"></a>可变参数时None的使用</h3><p>通常如果使用一个可变类型作为默认参数时， 会使用None来代替</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params">lst=<span class="hljs-literal">None</span></span>):	<span class="hljs-comment"># 向一个列表中插入元素3，列表默认为None</span><br>   ...:     <span class="hljs-keyword">if</span> lst <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span>:<br>   ...:         lst = []<br>   ...:     lst.append(<span class="hljs-number">3</span>)<br>   ...:     <span class="hljs-built_in">print</span>(lst)<br>   ...:     <br><br>In [<span class="hljs-number">2</span>]: fn.__defaults__		<span class="hljs-comment"># 函数的__defaults__属性就是可变参数对应的None</span><br>Out[<span class="hljs-number">2</span>]: (<span class="hljs-literal">None</span>,)<br><br>In [<span class="hljs-number">3</span>]: fn()<br>[<span class="hljs-number">3</span>]<br><br>In [<span class="hljs-number">4</span>]: fn()				<span class="hljs-comment"># 如果不传入值，函数执行的时候会先创建一个空列表，然后append</span><br>[<span class="hljs-number">3</span>]<br><br>In [<span class="hljs-number">5</span>]: fn.__defaults__<br>Out[<span class="hljs-number">5</span>]: (<span class="hljs-literal">None</span>,)<br><br>In [<span class="hljs-number">6</span>]: fn([<span class="hljs-number">1</span>,<span class="hljs-number">2</span>])<br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br><br>In [<span class="hljs-number">7</span>]: fn.__defaults__		<span class="hljs-comment"># 传入值之后，也不会改变函数的__default__属性</span><br>Out[<span class="hljs-number">7</span>]: (<span class="hljs-literal">None</span>,)<br></code></pre></td></tr></table></figure>

<h3 id="Python作用域、闭包、装饰器资料"><a href="#Python作用域、闭包、装饰器资料" class="headerlink" title="Python作用域、闭包、装饰器资料"></a>Python作用域、闭包、装饰器资料</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000004461404">Python 的闭包和装饰器</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000007321972">说说Python中的闭包 - Closure</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000006236947">Python Enclosing作用域、闭包、装饰器话聊上篇</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://segmentfault.com/a/1190000006659077">Python Enclosing作用域、闭包、装饰器话聊下篇</a></p>
</li>
</ul>
<h2 id="函数执行流程"><a href="#函数执行流程" class="headerlink" title="函数执行流程"></a>函数执行流程</h2><p>函数的执行过程就是压栈和出栈的过程。具体如下</p>
<p>当调用函数的时候， 解释器会把当前现场压栈，然后开始执行被调函数， 被调函数执行完成，解释器弹出当前栈顶，恢复现场</p>
<h2 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h2><p>递归函数的定义就是函数调用函数自身。</p>
<ul>
<li>递归函数必须要有退出条件</li>
<li>为了保护解释器， Python对最大递归深度有限制</li>
<li>绝大多数递归都可以转化为循环使用</li>
<li>尽量避免使用递归</li>
<li>sys模块中的getrecursionlimit和setrecursionlimit可以获取和设置最大递归深度</li>
</ul>
<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span><br>Out[<span class="hljs-number">1</span>]: &lt;function __main__.&lt;<span class="hljs-keyword">lambda</span>&gt;&gt;<br></code></pre></td></tr></table></figure>

<p>匿名函数有以下特点</p>
<ul>
<li>lambda来定义</li>
<li>参数列表不需要用小括号</li>
<li>冒号不是用来开启新语句块</li>
<li>没有return，最后一个表达式的值即返回值</li>
<li>匿名函数（lambda表达式）只能写在一行上，所以也叫单行函数</li>
</ul>
<p>匿名函数的好处是</p>
<ul>
<li>函数没有名字，不必担心函数名冲突</li>
<li>匿名函数也是一个函数对象，可以把匿名函数返回给一个变量，再利用变量调用函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span><br>Out[<span class="hljs-number">1</span>]: &lt;function __main__.&lt;<span class="hljs-keyword">lambda</span>&gt;&gt;<br><br>In [<span class="hljs-number">2</span>]: f = <span class="hljs-keyword">lambda</span> x: x + <span class="hljs-number">1</span>		<span class="hljs-comment"># 直接把lambda函数返回给变量f</span><br><br>In [<span class="hljs-number">3</span>]: f(<span class="hljs-number">3</span>)					<span class="hljs-comment"># 由变量f调用函数</span><br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">4</span>]: f(<span class="hljs-number">5</span>)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">6</span><br><br>In [<span class="hljs-number">5</span>]: (<span class="hljs-keyword">lambda</span> x: x * <span class="hljs-number">2</span>)(<span class="hljs-number">3</span>)	<span class="hljs-comment"># 第一对括号用来改变优先级 第二对括号表示函数调用</span><br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">6</span><br><br>In [<span class="hljs-number">6</span>]: (<span class="hljs-keyword">lambda</span> : <span class="hljs-number">1</span>)()			<span class="hljs-comment"># lambda表示式参数可以为空</span><br>Out[<span class="hljs-number">6</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">7</span>]: (<span class="hljs-keyword">lambda</span> x, y: x + y)(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)	<span class="hljs-comment"># lambda表达式的位置参数</span><br>Out[<span class="hljs-number">7</span>]: <span class="hljs-number">8</span><br><br>In [<span class="hljs-number">8</span>]: (<span class="hljs-keyword">lambda</span> *args: args)(*<span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>))	<span class="hljs-comment"># lambda表达式的位置可变参数</span><br>Out[<span class="hljs-number">8</span>]: (<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>)<br><br>In [<span class="hljs-number">9</span>]: (<span class="hljs-keyword">lambda</span> *args, **kwargs: <span class="hljs-built_in">print</span>(args, kwargs))(*<span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>), **&#123;<span class="hljs-built_in">str</span>(x):x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">3</span>)&#125;)	<span class="hljs-comment"># lambda表达式的位置可变参数和关键字可变参数</span><br>(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>) &#123;<span class="hljs-string">&#x27;0&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>: <span class="hljs-number">2</span>&#125;<br><br>In [<span class="hljs-number">10</span>]: (<span class="hljs-keyword">lambda</span> *, x: x)(x=<span class="hljs-number">3</span>)	<span class="hljs-comment"># *号后面的位置参数必须使用关键字参数</span><br>Out[<span class="hljs-number">10</span>]: <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<blockquote>
<p>普通函数所支持的参数的变化，匿名函数都支持</p>
</blockquote>
<p>匿名函数的常见用法：通常用于高阶函数的参数， 当此函数非常短小的时候，就适合使用匿名函数</p>
<p>比如匿名函数可以作为<code>sorted</code>函数的自定义键函数（custom key function）</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">11</span>]: <span class="hljs-built_in">help</span>(<span class="hljs-built_in">sorted</span>)<br>    Help on built-<span class="hljs-keyword">in</span> function <span class="hljs-built_in">sorted</span> <span class="hljs-keyword">in</span> module builtins:<br><br>	<span class="hljs-built_in">sorted</span>(iterable, key=<span class="hljs-literal">None</span>, reverse=<span class="hljs-literal">False</span>)<br>    	Return a new <span class="hljs-built_in">list</span> containing <span class="hljs-built_in">all</span> items <span class="hljs-keyword">from</span> the iterable <span class="hljs-keyword">in</span> ascending order.<br><br>    	A custom key function can be supplied to customise the sort order, <span class="hljs-keyword">and</span> the<br>    	reverse flag can be <span class="hljs-built_in">set</span> to request the result <span class="hljs-keyword">in</span> descending order.<br><br>In [<span class="hljs-number">12</span>]: <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> namedtuple<br><br>In [<span class="hljs-number">13</span>]: point = namedtuple(<span class="hljs-string">&#x27;point&#x27;</span>,[<span class="hljs-string">&#x27;x&#x27;</span>,<span class="hljs-string">&#x27;y&#x27;</span>])	<span class="hljs-comment"># 定义命名元组point</span><br><br>In [<span class="hljs-number">14</span>]: points = [point(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>), point(<span class="hljs-number">4</span>, <span class="hljs-number">3</span>), point(<span class="hljs-number">8</span>, <span class="hljs-number">9</span>)]<br><br>In [<span class="hljs-number">15</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">getY</span>(<span class="hljs-params">point</span>):<br>    ...:     <span class="hljs-keyword">return</span> point.y<br>    ...: <br><br>In [<span class="hljs-number">16</span>]: <span class="hljs-built_in">sorted</span>(points, key=getY)	<span class="hljs-comment"># 简短的函数可以作为自定义键函数</span><br>Out[<span class="hljs-number">16</span>]: [point(x=<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>), point(x=<span class="hljs-number">4</span>, y=<span class="hljs-number">3</span>), point(x=<span class="hljs-number">8</span>, y=<span class="hljs-number">9</span>)]<br><br>In [<span class="hljs-number">17</span>]: <span class="hljs-built_in">sorted</span>(points, key=<span class="hljs-keyword">lambda</span> x: x.y)	<span class="hljs-comment"># lambda表示也可以作为自定义键函数</span><br>Out[<span class="hljs-number">17</span>]: [point(x=<span class="hljs-number">1</span>, y=<span class="hljs-number">2</span>), point(x=<span class="hljs-number">4</span>, y=<span class="hljs-number">3</span>), point(x=<span class="hljs-number">8</span>, y=<span class="hljs-number">9</span>)]<br></code></pre></td></tr></table></figure>

<h2 id="高阶函数"><a href="#高阶函数" class="headerlink" title="高阶函数"></a>高阶函数</h2><h3 id="高阶函数的定义"><a href="#高阶函数的定义" class="headerlink" title="高阶函数的定义"></a>高阶函数的定义</h3><p>高阶函数英文叫Higher-order function。</p>
<p>在数学和计算机科学中，<strong>高阶函数</strong>是至少满足下列一个条件的函数：</p>
<ul>
<li>接受一个或多个函数作为输入：通常用于大多数逻辑固定，少部分逻辑不固定的场景</li>
<li>输出一个函数：函数作为返回值： 通常是用于闭包的场景， 需要封装一些变量</li>
</ul>
<p>常见的高阶函数有map,reduce,filter</p>
<h3 id="高阶函数-插入排序"><a href="#高阶函数-插入排序" class="headerlink" title="高阶函数:插入排序"></a>高阶函数:插入排序</h3><p>插入排序时，排序顺序分为升序和降序，我们可以使用一个函数作为插入排序函数的参数来控制是升序还是降序。</p>
<p>首先看一下按照升序插入排序，然后再改进成升序降序可控的插入排序</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">insertSort</span>(<span class="hljs-params"><span class="hljs-built_in">iter</span></span>):<br>    ret = []<br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">iter</span>:<br>        <span class="hljs-keyword">for</span> i, y <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(ret):<br>            <span class="hljs-keyword">if</span> x &lt; y:				<span class="hljs-comment"># 修改处</span><br>                ret.insert(i, x)<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">else</span>:<br>            ret.append(x)<br>    <span class="hljs-keyword">return</span> ret<br></code></pre></td></tr></table></figure>

<p>如果想让这个函数降序排序，则只需要修改代码中的注释处，改成<code>x &gt; y</code>即可</p>
<p>如果传入一个函数来控制if后面的bool值，则就实现了通过参数控制升降了</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">insertSort</span>(<span class="hljs-params"><span class="hljs-built_in">iter</span>, cmp = <span class="hljs-keyword">lambda</span> x, y: x &lt; y</span>):<br>    ret = []<br>    <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">iter</span>:<br>        <span class="hljs-keyword">for</span> i, y <span class="hljs-keyword">in</span> <span class="hljs-built_in">enumerate</span>(ret):<br>            <span class="hljs-keyword">if</span> cmp(x, y):<br>                ret.insert(i, x)<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">else</span>:<br>            ret.append(x)<br>    <span class="hljs-keyword">return</span> ret<br></code></pre></td></tr></table></figure>

<p>这个函数就默认为升序排序了，但是可以传入一个比较函数变成降序，如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">lst = insertSort([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>, <span class="hljs-number">6</span>, <span class="hljs-number">8</span>, <span class="hljs-number">5</span>],<span class="hljs-keyword">lambda</span> x, y: x &gt; y)<br></code></pre></td></tr></table></figure>

<h3 id="map"><a href="#map" class="headerlink" title="map"></a>map</h3><p><code>map()</code>函数原型：**<code>map(func, *iterables) --&gt; map object</code>**</p>
<p><code>map()</code>函数接收两个参数，一个是函数<code>func</code>，一个是可迭代对象<code>Iterable</code>，<code>map</code>将传入的函数依次作用到可迭代对象的每个元素，并把结果放入**<code>map对象</code>**这个迭代器中。所以<code>map</code>函数是高阶函数。</p>
<p><code>map</code>类中存在<code>__iter__</code>和<code>__next__</code>函数</p>
<p><strong>map使用示例</strong></p>
<p>把list中的所有数字的平方</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x</span>):								<span class="hljs-comment"># 定义平方函数f</span><br>   ...:         <span class="hljs-keyword">return</span> x ** <span class="hljs-number">2</span><br>   ...: <br><br>In [<span class="hljs-number">2</span>]: ret = <span class="hljs-built_in">map</span>(f, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>])		<span class="hljs-comment"># 函数f和列表作为map的参数</span><br><br>In [<span class="hljs-number">3</span>]: ret										<span class="hljs-comment"># map的返回值只是一个返回值</span><br>Out[<span class="hljs-number">3</span>]: &lt;<span class="hljs-built_in">map</span> at <span class="hljs-number">0x7f2d539a7470</span>&gt;<br><br>In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(ret)								<span class="hljs-comment"># 可以用next方法输出map的结果</span><br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">5</span>]: <span class="hljs-built_in">next</span>(ret)<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">4</span><br><br>In [<span class="hljs-number">6</span>]: lst = <span class="hljs-built_in">list</span>(ret)							<span class="hljs-comment"># 也可以用list函数计算出所有的值</span><br><br>In [<span class="hljs-number">7</span>]: lst<br>Out[<span class="hljs-number">7</span>]: [<span class="hljs-number">9</span>, <span class="hljs-number">16</span>, <span class="hljs-number">25</span>, <span class="hljs-number">36</span>, <span class="hljs-number">49</span>]<br></code></pre></td></tr></table></figure>

<h3 id="reduce"><a href="#reduce" class="headerlink" title="reduce"></a>reduce</h3><p><code>map</code>函数是<code>map</code>类的函数，但是reduce函数属于<code>functools</code>包的<code>reduce</code>模块中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> functools <span class="hljs-keyword">import</span> reduce<br></code></pre></td></tr></table></figure>

<p>然后可以使用<code>help</code>方法查看<code>reduce</code>函数的使用</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">help</span>(reduce)<br></code></pre></td></tr></table></figure>

<p>输出结果如下</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs livecodeserver">Help <span class="hljs-keyword">on</span> <span class="hljs-title">built-in</span> <span class="hljs-title">function</span> <span class="hljs-title">reduce</span> <span class="hljs-title">in</span> <span class="hljs-title">module</span> <span class="hljs-title">_functools</span>:<br><br>reduce(...)<br>    reduce(<span class="hljs-function"><span class="hljs-keyword">function</span>, <span class="hljs-title">sequence</span>[, <span class="hljs-title">initial</span>]) -&gt; <span class="hljs-title">value</span></span><br><br>    Apply <span class="hljs-keyword">a</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">of</span> <span class="hljs-title">two</span> <span class="hljs-title">arguments</span> <span class="hljs-title">cumulatively</span> <span class="hljs-title">to</span> <span class="hljs-title">the</span> <span class="hljs-title">items</span> <span class="hljs-title">of</span> <span class="hljs-title">a</span> <span class="hljs-title">sequence</span>,</span><br>    <span class="hljs-built_in">from</span> left <span class="hljs-built_in">to</span> <span class="hljs-literal">right</span>, so <span class="hljs-keyword">as</span> <span class="hljs-built_in">to</span> reduce <span class="hljs-keyword">the</span> sequence <span class="hljs-built_in">to</span> <span class="hljs-keyword">a</span> single <span class="hljs-built_in">value</span>.<br>    For example, reduce(lambda x, y: x+y, [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]) calculates<br>    ((((<span class="hljs-number">1</span>+<span class="hljs-number">2</span>)+<span class="hljs-number">3</span>)+<span class="hljs-number">4</span>)+<span class="hljs-number">5</span>).  If initial is present, <span class="hljs-keyword">it</span> is placed <span class="hljs-keyword">before</span> <span class="hljs-keyword">the</span> <span class="hljs-keyword">items</span><br>    <span class="hljs-keyword">of</span> <span class="hljs-keyword">the</span> sequence <span class="hljs-keyword">in</span> <span class="hljs-keyword">the</span> calculation, <span class="hljs-keyword">and</span> serves <span class="hljs-keyword">as</span> <span class="hljs-keyword">a</span> default when <span class="hljs-keyword">the</span><br>    sequence is <span class="hljs-literal">empty</span>.<br></code></pre></td></tr></table></figure>

<p><strong>reduce使用示例</strong></p>
<ul>
<li>输出1到10的和</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">add</span>(<span class="hljs-params">x,y</span>): <br>    <span class="hljs-keyword">return</span> x + y<br><span class="hljs-built_in">print</span>(reduce(add, <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-number">11</span>)))<br></code></pre></td></tr></table></figure>

<p>输出结果为55</p>
<ul>
<li>把字符串转化为<code>int</code>，不适用<code>int()</code>函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">str2int</span>(<span class="hljs-params">s</span>):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">char2num</span>(<span class="hljs-params">c</span>):<br>        <span class="hljs-keyword">return</span> &#123;<span class="hljs-string">&#x27;0&#x27;</span>: <span class="hljs-number">0</span>, <span class="hljs-string">&#x27;1&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2&#x27;</span>: <span class="hljs-number">2</span> ,<span class="hljs-string">&#x27;3&#x27;</span>: <span class="hljs-number">3</span>, <span class="hljs-string">&#x27;4&#x27;</span>: <span class="hljs-number">4</span>, <span class="hljs-string">&#x27;5&#x27;</span>: <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;6&#x27;</span>: <span class="hljs-number">6</span>, <span class="hljs-string">&#x27;7&#x27;</span>: <span class="hljs-number">7</span>, <span class="hljs-string">&#x27;8&#x27;</span>: <span class="hljs-number">8</span>, <span class="hljs-string">&#x27;9&#x27;</span>: <span class="hljs-number">9</span>&#125;[c]<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">f</span>(<span class="hljs-params">x, y</span>):<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">10</span> * x + y <br>    <span class="hljs-keyword">return</span> reduce(f, <span class="hljs-built_in">map</span>(char2num, s))<br></code></pre></td></tr></table></figure>

<blockquote>
<p>str2int(‘1234321’)  &#x3D;&gt; 1234321</p>
</blockquote>
<h3 id="filter"><a href="#filter" class="headerlink" title="filter"></a>filter</h3><p><code>help(filter)</code>之后可以发现<code>filter</code>是一个类，其中有一个<code>filter</code>函数，原型如下</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-built_in">filter</span>(function <span class="hljs-keyword">or</span> <span class="hljs-literal">None</span>, iterable) --&gt; <span class="hljs-built_in">filter</span> <span class="hljs-built_in">object</span><br></code></pre></td></tr></table></figure>

<p>和<code>map()</code>类似，<code>filter()</code>也接收一个函数和一个序列。和<code>map()</code>不同的是，<code>filter()</code>把传入的函数依次作用于每个元素，然后根据返回值是<code>True</code>还是<code>False</code>决定保留还是丢弃该元素。返回值也是一个迭代器。</p>
<p><strong>filter使用示例</strong></p>
<p>使用filter筛选出list中的回文数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_palindrome</span>(<span class="hljs-params">n</span>):<br>    m = <span class="hljs-built_in">str</span>(n)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(m)//<span class="hljs-number">2</span>):<br>        <span class="hljs-keyword">if</span> m[i] != m[<span class="hljs-built_in">len</span>(m) - i -<span class="hljs-number">1</span>]:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>lst = <span class="hljs-built_in">list</span>(<span class="hljs-built_in">filter</span>(is_palindrome, [<span class="hljs-number">12321</span>, <span class="hljs-number">194</span>, <span class="hljs-number">13431</span>]))<br><span class="hljs-built_in">print</span>(lst)<br><span class="hljs-comment"># 结果: [12321, 13431]</span><br></code></pre></td></tr></table></figure>

<p>所以<code>filter()</code>函数用于过滤序列，重点在于选择一个正确的筛选函数。</p>
<h2 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h2><p>带yield语句的函数称之为生成器函数， 生成器函数的返回值是生成器</p>
<ul>
<li>生成器函数执行的时候，不会执行函数体</li>
<li>当next生成器的时候， 当前代码执行到之后的第一个yield，会弹出值，并且暂停函数</li>
<li>当再次next生成器的时候，从上次暂停处开始往下执行</li>
<li>当没有多余的yield的时候，会抛出StopIteration异常，异常的value是函数的返回值</li>
</ul>
<h3 id="生成器的基本形式"><a href="#生成器的基本形式" class="headerlink" title="生成器的基本形式"></a>生成器的基本形式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">g</span>():<br>    ...:     <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">5</span>):<br>    ...:         <span class="hljs-keyword">yield</span> x	<span class="hljs-comment"># 弹出x</span><br>    ...:         <br><br>In [<span class="hljs-number">2</span>]: r = g()		<span class="hljs-comment"># 函数调用完成之后函数现场并没有被销毁</span><br><br>In [<span class="hljs-number">3</span>]: r<br>Out[<span class="hljs-number">3</span>]: &lt;generator <span class="hljs-built_in">object</span> g at <span class="hljs-number">0x7f0e18543990</span>&gt;<br><br>In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(r)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">0</span><br><br>In [<span class="hljs-number">5</span>]: <span class="hljs-built_in">next</span>(r)<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">6</span>]: <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> r:<br>    ...:     <span class="hljs-built_in">print</span>(x)<br>    ...:     <br><span class="hljs-number">2</span><br><span class="hljs-number">3</span><br><span class="hljs-number">4</span><br></code></pre></td></tr></table></figure>

<h3 id="生成器的执行顺序"><a href="#生成器的执行顺序" class="headerlink" title="生成器的执行顺序"></a>生成器的执行顺序</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">g</span>():<br>   ...:     <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;a&#x27;</span>)<br>   ...:     <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span><br>   ...:     <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;b&#x27;</span>)<br>   ...:     <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span><br>   ...:     <span class="hljs-keyword">return</span> <span class="hljs-number">3</span><br>   ...: <br><br>In [<span class="hljs-number">2</span>]: r = g()	<span class="hljs-comment"># 执行生成器函数的时候函数并没有被执行 </span><br><br>In [<span class="hljs-number">3</span>]: <span class="hljs-built_in">next</span>(r)	<span class="hljs-comment"># 执行到第一个yield就停止执行</span><br>a<br>Out[<span class="hljs-number">3</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">4</span>]: <span class="hljs-built_in">next</span>(r)	<span class="hljs-comment"># 执行到第二个yield就停止执行</span><br>b<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">2</span><br><br>In [<span class="hljs-number">5</span>]: <span class="hljs-built_in">next</span>(r)	<span class="hljs-comment"># 从第二个yield开始，当没有更多yield的时候，抛出StopIteration异常，异常的值正好是return的返回值</span><br>---------------------------------------------------------------------------<br>StopIteration                             Traceback (most recent call last)<br>&lt;ipython-<span class="hljs-built_in">input</span>-<span class="hljs-number">5</span>-0b5056469c9c&gt; <span class="hljs-keyword">in</span> &lt;module&gt;()<br>----&gt; <span class="hljs-number">1</span> <span class="hljs-built_in">next</span>(r)<br><br>StopIteration: <span class="hljs-number">3</span><br></code></pre></td></tr></table></figure>

<h3 id="生成器的应用"><a href="#生成器的应用" class="headerlink" title="生成器的应用"></a>生成器的应用</h3><p><strong>计数器第一种形式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">1</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>():<br>   ...:     x = <span class="hljs-number">0</span><br>   ...:     <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>   ...:         x += <span class="hljs-number">1</span><br>   ...:         <span class="hljs-keyword">yield</span> x	<span class="hljs-comment"># 每次将+1之后的x弹出</span><br>   ...:         <br><br>In [<span class="hljs-number">2</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">inc</span>(<span class="hljs-params">c</span>):<br>   ...:     <span class="hljs-keyword">return</span> <span class="hljs-built_in">next</span>(c)<br>   ...: <br><br>In [<span class="hljs-number">3</span>]: c = counter()	<span class="hljs-comment"># counter函数执行的结果就是一个生成器，所以c就是生成器</span><br><br>In [<span class="hljs-number">4</span>]: inc(c)<br>Out[<span class="hljs-number">4</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">5</span>]: inc(c)<br>Out[<span class="hljs-number">5</span>]: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<p><strong>计数器第二种形式</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">6</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">make_inc</span>():<br>   ...:     <span class="hljs-keyword">def</span> <span class="hljs-title function_">counter</span>():<br>   ...:         x = <span class="hljs-number">0</span><br>   ...:         <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>   ...:             x += <span class="hljs-number">1</span><br>   ...:             <span class="hljs-keyword">yield</span> x<br>   ...:     c = counter()<br>   ...:     <span class="hljs-keyword">return</span> <span class="hljs-keyword">lambda</span> : <span class="hljs-built_in">next</span>(c)	<span class="hljs-comment"># 使用lambda表达式将next(c)作为函数返回，而不是只返回一个next(c)</span><br>   ...: <br><br>In [<span class="hljs-number">7</span>]: make_inc()<br>Out[<span class="hljs-number">7</span>]: &lt;function __main__.make_inc.&lt;<span class="hljs-built_in">locals</span>&gt;.&lt;<span class="hljs-keyword">lambda</span>&gt;&gt;	<span class="hljs-comment"># make_inc本质是一个匿名函数</span><br><br>In [<span class="hljs-number">8</span>]: inc = make_inc()<br><br>In [<span class="hljs-number">9</span>]: inc()<br>Out[<span class="hljs-number">9</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">10</span>]: inc()<br>Out[<span class="hljs-number">10</span>]: <span class="hljs-number">2</span><br></code></pre></td></tr></table></figure>

<p><strong>斐波拉契数列</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs python">In [<span class="hljs-number">11</span>]: <span class="hljs-keyword">def</span> <span class="hljs-title function_">fib</span>():<br>    ...:     a = <span class="hljs-number">1</span><br>    ...:     b = <span class="hljs-number">1</span><br>    ...:     <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>    ...:         <span class="hljs-keyword">yield</span> a<br>    ...:         a, b = b, a + b<br>    ...:         <br><br>In [<span class="hljs-number">12</span>]: fib()<br>Out[<span class="hljs-number">12</span>]: &lt;generator <span class="hljs-built_in">object</span> fib at <span class="hljs-number">0x7f9ff2746830</span>&gt;<br><br>In [<span class="hljs-number">13</span>]: f = fib()	<span class="hljs-comment"># 生成器f</span><br><br>In [<span class="hljs-number">15</span>]: <span class="hljs-built_in">next</span>(f)<br>Out[<span class="hljs-number">15</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">16</span>]: <span class="hljs-built_in">next</span>(f)<br>Out[<span class="hljs-number">16</span>]: <span class="hljs-number">1</span><br><br>In [<span class="hljs-number">17</span>]: <span class="hljs-built_in">next</span>(f)<br>Out[<span class="hljs-number">17</span>]: <span class="hljs-number">2</span><br><br>In [<span class="hljs-number">18</span>]: <span class="hljs-built_in">next</span>(f)<br>Out[<span class="hljs-number">18</span>]: <span class="hljs-number">3</span><br><br>In [<span class="hljs-number">19</span>]: g = fib()<br><br>In [<span class="hljs-number">20</span>]: ret = []	<span class="hljs-comment"># 将yield的值都保存在ret中</span><br><br>In [<span class="hljs-number">21</span>]: <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1000</span>):	<span class="hljs-comment"># 遍历生成器</span><br>    ...:     ret.append(<span class="hljs-built_in">next</span>(g))<br>    ...:     <br><br>In [<span class="hljs-number">22</span>]: ret[-<span class="hljs-number">1</span>]	<span class="hljs-comment"># 取ret列表的最后一个元素值，速度很快</span><br>Out[<span class="hljs-number">22</span>]: <span class="hljs-number">43466557686937456435688527675040625802564660517371780402481729089536555417949051890403879840079255169295922593080322634775209689623239873322471161642996440906533187938298969649928516003704476137795166849228875</span><br></code></pre></td></tr></table></figure>

<p><strong>生成器的高级用法</strong></p>
<p>生成器的高级用法是<strong>协程</strong></p>
<ul>
<li>协程：协程运行在一个线程之内， 在用户态调度</li>
</ul>
<h3 id="生成器参考资料"><a href="#生成器参考资料" class="headerlink" title="生成器参考资料"></a>生成器参考资料</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://www.zhihu.com/question/24807364">python生成器到底有什么优点？</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://stackoverflow.com/questions/1756096/understanding-generators-in-python">Understanding Generators in Python</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://intermediatepythonista.com/python-generators">Introduction to Python Generators</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://fullstackpython.atjiang.com/generators.html">生成器资料汇总</a></p>
</li>
</ul>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/python/" class="category-chain-item">python</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Python/">#Python</a>
      
        <a href="/tags/%E5%87%BD%E6%95%B0/">#函数</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>Python函数</div>
      <div>http://example.com/2017/01/07/python函数/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Suncle Chen</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2017年1月7日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2017/01/11/python%E8%A7%A3%E6%9E%90%E5%BC%8F/" title="Python解析式">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Python解析式</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2016/12/29/linux%E9%85%8D%E7%BD%AEc-11%E7%BC%96%E8%AF%91%E7%8E%AF%E5%A2%83/" title="linux配置c++11编译环境">
                        <span class="hidden-mobile">linux配置c++11编译环境</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <script type="text/javascript">
    Fluid.utils.loadComments('#comments', function() {
      var light = 'github-light';
      var dark = 'github-dark';
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema === 'dark') {
        schema = dark;
      } else {
        schema = light;
      }
      window.UtterancesThemeLight = light;
      window.UtterancesThemeDark = dark;
      var s = document.createElement('script');
      s.setAttribute('src', 'https://utteranc.es/client.js');
      s.setAttribute('repo', 'suncle1993.github.io');
      s.setAttribute('issue-term', 'pathname');
      
      s.setAttribute('label', 'utterances');
      
      s.setAttribute('theme', schema);
      s.setAttribute('crossorigin', 'anonymous');
      document.getElementById('comments').appendChild(s);
    })
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="busuanzi_container_site_pv" style="display: none">
        总访问量 
        <span id="busuanzi_value_site_pv"></span>
         次
      </span>
    
    
      <span id="busuanzi_container_site_uv" style="display: none">
        总访客数 
        <span id="busuanzi_value_site_uv"></span>
         人
      </span>
    
    
  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>





  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
